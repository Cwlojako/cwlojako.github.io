<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ios手机fiddler代理详细步骤 | Cwlojako</title>
    <meta name="description" content="小尉的博客">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/img/lufei1.gif">
  <link rel="stylesheet" href="/css/style.css">
    
    <link rel="preload" href="/assets/css/0.styles.fc2ed1e1.css" as="style"><link rel="preload" href="/assets/js/app.4c8c796d.js" as="script"><link rel="preload" href="/assets/js/2.0b9b4c7f.js" as="script"><link rel="preload" href="/assets/js/17.d70d5bcf.js" as="script"><link rel="prefetch" href="/assets/js/10.633c15de.js"><link rel="prefetch" href="/assets/js/11.363fbfb3.js"><link rel="prefetch" href="/assets/js/12.3cb3178c.js"><link rel="prefetch" href="/assets/js/13.f923c99d.js"><link rel="prefetch" href="/assets/js/14.c026e12a.js"><link rel="prefetch" href="/assets/js/15.f5c82b5c.js"><link rel="prefetch" href="/assets/js/16.28f1868e.js"><link rel="prefetch" href="/assets/js/18.87b1d4c6.js"><link rel="prefetch" href="/assets/js/19.87d4bd01.js"><link rel="prefetch" href="/assets/js/20.a8d59b94.js"><link rel="prefetch" href="/assets/js/21.89787c75.js"><link rel="prefetch" href="/assets/js/22.2151dce5.js"><link rel="prefetch" href="/assets/js/23.b203cf23.js"><link rel="prefetch" href="/assets/js/24.ff3e6ac9.js"><link rel="prefetch" href="/assets/js/25.47dbe4a4.js"><link rel="prefetch" href="/assets/js/3.12f9c392.js"><link rel="prefetch" href="/assets/js/4.4bb03758.js"><link rel="prefetch" href="/assets/js/5.971058b2.js"><link rel="prefetch" href="/assets/js/6.20bbd58b.js"><link rel="prefetch" href="/assets/js/7.a9903e3e.js"><link rel="prefetch" href="/assets/js/8.46d4c408.js"><link rel="prefetch" href="/assets/js/9.7b219242.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fc2ed1e1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><main><main slot="sidebar-top"><a href="https://github.com/JoeyBling/vuepress-theme-yilia-plus" aria-label="View source on GitHub" target="_blank" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path> <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm" style="transform-origin: 130px 106px;"></path> <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a></main> <div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Cwlojako</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/swiper/swiper.html" class="nav-link">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/css/backgroundSize/backgroundSize.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/cloud/aliyun/node_vue_mysql.html" class="nav-link">
  云部署
</a></li><li class="dropdown-item"><!----> <a href="/vant/vantSheet/vantSheet.html" class="nav-link">
  vant
</a></li><li class="dropdown-item"><!----> <a href="/thirdPlatform/huangxin-webIM/webIM.html" class="nav-link">
  第三方集成
</a></li><li class="dropdown-item"><!----> <a href="/other/fiddler.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="/public-ui/quickStart.html" class="nav-link">
  组件库
</a></div><div class="nav-item"><a href="/about/about.html" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/Cwlojako" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/swiper/swiper.html" class="nav-link">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/css/backgroundSize/backgroundSize.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/cloud/aliyun/node_vue_mysql.html" class="nav-link">
  云部署
</a></li><li class="dropdown-item"><!----> <a href="/vant/vantSheet/vantSheet.html" class="nav-link">
  vant
</a></li><li class="dropdown-item"><!----> <a href="/thirdPlatform/huangxin-webIM/webIM.html" class="nav-link">
  第三方集成
</a></li><li class="dropdown-item"><!----> <a href="/other/fiddler.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="/public-ui/quickStart.html" class="nav-link">
  组件库
</a></div><div class="nav-item"><a href="/about/about.html" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/Cwlojako" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ios手机fiddler代理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/other/fiddler.html" aria-current="page" class="active sidebar-link">ios手机fiddler代理详细步骤</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ios手机fiddler代理详细步骤"><a href="#ios手机fiddler代理详细步骤" class="header-anchor">#</a> ios手机fiddler代理详细步骤</h1> <p><img src="https://img-blog.csdnimg.cn/20210715163146566.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
索大镇楼，废话不多说</p> <h5 id="_1-安装-fildder-可以在你电脑的软件管家中下载-这里就不贴下载地址啦"><a href="#_1-安装-fildder-可以在你电脑的软件管家中下载-这里就不贴下载地址啦" class="header-anchor">#</a> 1.安装 fildder，可以在你电脑的软件管家中下载，这里就不贴下载地址啦</h5> <h5 id="_2-fildder-设置"><a href="#_2-fildder-设置" class="header-anchor">#</a> 2.fildder 设置</h5> <ul><li>Tools-Otions-HTTPS 配置
<img src="https://img-blog.csdnimg.cn/20210715171810857.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> <li>connetions 配置
<img src="https://img-blog.csdnimg.cn/20210715171911370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li></ul> <h5 id="_3-安装证书"><a href="#_3-安装证书" class="header-anchor">#</a> 3.安装证书</h5> <p>在安装 fiddler 的时候就会有提示安装证书，以防你安装得不对可以在这个按钮再安装一遍证书。导出证书到桌面
<img src="https://img-blog.csdnimg.cn/2021071517211155.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"> <img src="https://img-blog.csdnimg.cn/20210715172528994.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"> <img src="https://img-blog.csdnimg.cn/20210715172555120.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"> <img src="https://img-blog.csdnimg.cn/20210715172659868.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <p>验证是否安装成功，点击这个能查看到刚才证书就证明安装成功啦
<img src="https://img-blog.csdnimg.cn/20210715172727365.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <h4 id="_4-设置-fiddler-代理脚本文件-这里我贴上我的-大家依葫芦画瓢-主要就是去改动-source-里的实际访问地址-以及-replacewith-替换成你本地项目的运行地址-例如我的是-https-192-168-11-75-8089-vp-实际我要代理访问的地址是-https-qy-test-do1-com-cn-wxqyh-vp-其他过滤抓包信息也可以在此文件中配置-详情见showlinks属性"><a href="#_4-设置-fiddler-代理脚本文件-这里我贴上我的-大家依葫芦画瓢-主要就是去改动-source-里的实际访问地址-以及-replacewith-替换成你本地项目的运行地址-例如我的是-https-192-168-11-75-8089-vp-实际我要代理访问的地址是-https-qy-test-do1-com-cn-wxqyh-vp-其他过滤抓包信息也可以在此文件中配置-详情见showlinks属性" class="header-anchor">#</a> 4. 设置 fiddler 代理脚本文件，这里我贴上我的，大家依葫芦画瓢，主要就是去改动 source 里的实际访问地址，以及 replaceWith 替换成你本地项目的运行地址，例如我的是“https://192.168.11.75:8089/vp/”，实际我要代理访问的地址是“https://qy.test.do1.com.cn/wxqyh/vp/”，其他过滤抓包信息也可以在此文件中配置，详情见showLinks属性</h4> <p><img src="https://img-blog.csdnimg.cn/20210715173941250.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/*!
 * Fiddler CustomRules
 * @Version 2.2.2
 * @Author xxxily
 * @home https://github.com/xxxily/Fiddler-plus
 * @bugs https://github.com/xxxily/Fiddler-plus/issues
 */</span>

<span class="token comment">/**
 * 全局配置项
 * 可配置链接类型的颜色，代理、替换地址等，
 * 默认对象的键【key】为要匹配的规则，值【key】为匹配后的配置
 */</span>
<span class="token keyword">var</span> <span class="token constant">GLOBAL_SETTING</span><span class="token operator">:</span> Object <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 全局开启禁止缓存功能【不建议开启，严重影响上网体验】</span>
    <span class="token literal-property property">disableCaching</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 自定义禁止缓存列表【针对性禁止缓存，进行项目调试的时候不影响其它网站的上网体验】</span>
    <span class="token literal-property property">disableCachingList</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;do1.com.cn|do1.net.cn&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止本地所有连接的缓存，包括IP为192段或127段的所有地址</span>
    <span class="token comment">// &quot;http://localhost|http://192|http://127&quot;,</span>
    <span class="token comment">// &quot;https://localhost|https://192|https://127&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 过滤配置【用于过滤出哪些URL需要显示，哪些需要隐藏】</span>
<span class="token literal-property property">Filter</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 只显示URL包含以下字符的连接</span>
    <span class="token literal-property property">showLinks</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;coinhive.com&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;10.10|192.168&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;qy.do1.com.cn&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;qy.do1.net.cn&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;tqy.do1.net.cn&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;gd-vip.liuliangjia&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;youzu&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;qy.qh-sun.com&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;do1.net.cn&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;open.weixin.qq.com&quot;</span><span class="token punctuation">,</span>
            <span class="token string">'pxcs.tgovcloud.com'</span><span class="token punctuation">,</span>
            <span class="token string">&quot;wltx.gdyvc.cn:82&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;baidu.com&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;jjt.collegetest.ccccltd.cn&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;jjt.college.ccccltd.cn&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;qy.dev.do1.com.cn&quot;</span><span class="token punctuation">,</span>
            <span class="token string">'wltx.12355.net'</span><span class="token punctuation">,</span>
            <span class="token string">'hnnh.qiweioa.cn'</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 不能直接吧 :443规则写在 hideLinks 过滤项上，否则大部分的无关链接都会被间接隐藏</span>
    <span class="token comment">// Tunnel To 影响前端审查，隐藏掉，目前无法彻底隐藏，逻辑待优化</span>
    <span class="token literal-property property">hideTunnelTo</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 隐藏URL包含以下字符串的连接 过滤</span>
    <span class="token literal-property property">hideLinks</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token comment">/*隐藏静态资源*/</span>
            <span class="token string">&quot;.jpg|.jpeg|.png|.gif&quot;</span><span class="token punctuation">,</span>
            <span class="token comment">// &quot;baidu.com|qzone.qq.com|qq.com&quot;,</span>
            <span class="token comment">/*隐藏热更新时的请求*/</span>
            <span class="token comment">// &quot;browser-sync|sockjs-node&quot;,</span>
            <span class="token comment">// &quot;192.168&quot;,</span>
            <span class="token comment">// &quot;hm.baidu.com&quot;,</span>
            <span class="token comment">// &quot;sogou.com&quot;,</span>
            <span class="token comment">// &quot;google.com|googleapis.com|mail.google|www.google&quot;,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 头部字段过滤器,除非您很熟悉或想测试下这部分功能，否则不建议您使用该过滤项</span>
    <span class="token literal-property property">headerFieldFilter</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
            <span class="token comment">//可选值 Referer Content-Type|Cookie|User-Agent|Accept-Language|Host 等，只要是头部支持的值都可以</span>
            <span class="token literal-property property">fieldName</span><span class="token operator">:</span><span class="token string">'Referer'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">workAt</span><span class="token operator">:</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token comment">// request|response</span>
            <span class="token literal-property property">display</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">filterList</span><span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token string">'xxxily.cc'</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 只显示以下文件类型【注意：是根据header的 Content-Type字段进行匹配的，所以js文件直接写js是不行的,但支持模糊匹配 】</span>
    <span class="token comment">// 附注：使用ContentType过滤的时候不一定准确，不带 ContentType的连接会被自动隐藏，该过滤选项的逻辑还有待优化和完善</span>
    <span class="token literal-property property">showContentType</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token comment">// &quot;image&quot;</span>
            <span class="token comment">// &quot;css&quot;,</span>
            <span class="token comment">// &quot;html&quot;,</span>
            <span class="token comment">// &quot;javascript&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 隐藏以下文件类型</span>
    <span class="token literal-property property">hideContentType</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token comment">// &quot;image&quot;</span>
            <span class="token comment">// &quot;css&quot;,</span>
            <span class="token comment">// &quot;html&quot;,</span>
            <span class="token comment">// &quot;javascript&quot;</span>
            <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 替换URL【可用于多环境切换、解决跨域、快速调试线上脚本等】</span>
<span class="token literal-property property">replace</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// &quot;qy.do1.net.cn&quot;:&quot;qy.do1.com.cn&quot;</span>
    <span class="token comment">// &quot;portal/portalExamAction!seachExamAnswer.action&quot;:&quot;C:\\Users\\admin\\Desktop\\response.json&quot;</span>
    <span class="token comment">// &quot;openExamAction!seachExamAnswer.action&quot;:&quot;C:\\Users\\admin\\Documents\\Fiddler2\\Captures\\Responses\\openExamAction!seachExamAnswer.action.htm&quot;</span>
    <span class="token comment">// &quot;portalExamAction!seachExamQusetionList.action&quot;:&quot;C:\\Users\\admin\\Documents\\Fiddler2\\Captures\\Responses\\portalExamAction!seachExamQusetionList.action.htm&quot;</span>

    <span class="token comment">//&quot;getAIQrCodeStatus.do&quot;:&quot;C:\\Users\\admin\\Documents\\Fiddler2\\Captures\\Responses\\getAIQrCodeStatus.do.json&quot;</span>
    <span class="token comment">// &quot;https://qy.do1.com.cn/wxqyh/themes/wap/examination/js&quot;:&quot;E:\\wxqyh_git\\wxqyh\\src\\main\\webapp\\themes\\wap\\examination\\js&quot;</span>
    <span class="token comment">// &quot;fileUploadMgrAction!doUploadImageJudge.action&quot;:&quot;C:\\Users\\admin\\Documents\\Fiddler2\\Captures\\Responses\\fileUploadMgrAction!doUploadImageJudge.action.htm&quot;</span>
    <span class="token comment">// &quot;examCountAction!ajaxAnswerDetail.action&quot;:&quot;C:\\Users\\admin\\Documents\\Fiddler2\\Captures\\Responses\\examCountAction!ajaxAnswerDetail.action.htm&quot;</span>
    <span class="token comment">// AI</span>
    <span class="token comment">//&quot;examAction!getExam.action&quot;:&quot;C:\\Users\\admin\\Documents\\Fiddler2\\Captures\\Responses\\examAction!getExam.action.htm&quot;</span>
    <span class="token comment">// &quot;portalExamAction!seachExamList.action&quot;:&quot;C:\\Users\\admin\\Documents\\Fiddler2\\Captures\\Responses\\portalExamAction!seachExamList.action.json&quot;</span>
    <span class="token comment">// &quot;checkIsSuccessFaceIdentify.do&quot;:&quot;C:\\Users\\admin\\Documents\\Fiddler2\\Captures\\Responses\\checkIsSuccessFaceIdentify.do.json&quot;</span>
    <span class="token comment">// &quot;http://qy.qh-sun.com/wxqyh/portal/weixin/weixinclientAction!handleOauthCode.action&quot;: &quot;http://192.168.23.11:8080/wxqyh/portal/weixin/weixinclientAction!handleOauthCode.action&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 替换URL的高级版，可以实现多个项目区分管理，进行二级匹配等</span>
<span class="token literal-property property">replacePlus</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
        <span class="token literal-property property">describe</span><span class="token operator">:</span> <span class="token string">&quot;do1 跨域开发代理配置&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;do1.net.cn&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;do1.com.cn&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;192.168&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;qy.qh-sun.com&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;gdyvc.cn:82&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;ht.qiweioa.cn&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;jjt.collegetest.ccccltd.cn&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;jjt.college.ccccltd.cn&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;jianxin.jcy.gov.cn&quot;</span><span class="token punctuation">,</span>
        <span class="token string">'wltx.12355.net'</span><span class="token punctuation">,</span>
        <span class="token string">'hnnh.qiweioa.cn'</span><span class="token punctuation">,</span>
        <span class="token string">&quot;isaas-hr-api.dev.do1.com.cn&quot;</span>

        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">subRules</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
        <span class="token literal-property property">describe</span><span class="token operator">:</span> <span class="token string">&quot;do1 wap-vue&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">/*测试环境*/</span>
        <span class="token string">&quot;https://tqy.do1.net.cn/qysp-mgr/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://tqy.do1.net.cn/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">'https://qy.dev.do1.com.cn/dev-wxqyh/vp/'</span><span class="token punctuation">,</span>
        <span class="token string">'https://qy.test.do1.com.cn/wxqyh/vp/'</span><span class="token punctuation">,</span>
        <span class="token string">'https://qy.dev.do1.com.cn/dev/vp/'</span><span class="token punctuation">,</span>
        <span class="token string">'https://qy.test.do1.com.cn/qwy/vp/'</span><span class="token punctuation">,</span>
        <span class="token string">'https://qy.dev.do1.com.cn/vp/'</span><span class="token punctuation">,</span>
        <span class="token string">'https://qy.test.do1.com.cn/vp/'</span><span class="token punctuation">,</span>
        <span class="token comment">// &quot;https://tqy.do1.net.cn/dev/&quot;,</span>
        <span class="token comment">/*Register环境*/</span>
        <span class="token string">&quot;https://qy.do1.com.cn/web/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://qy.do1.com.cn/beta/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://qy.do1.com.cn/beta_bug_app/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">/*线上环境*/</span>
        <span class="token string">&quot;https://qy.do1.com.cn/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://qy.do1.com.cn/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://qy.do1.com.cn/open/vp/&quot;</span><span class="token punctuation">,</span><span class="token comment">// 外部</span>
        <span class="token string">&quot;https://res.do1.com.cn/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://res.do1.com.cn/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://qy.do1.com.cn/beta_app/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://qy.do1.com.cn/beta_spare_app/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://qy.do1.com.cn/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://qy.do1.com.cn/qwy/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;https://qy.do1.com.cn/beta_spare/vp/&quot;</span><span class="token punctuation">,</span>

        <span class="token string">&quot;http://jianxin.jcy.gov.cn:8084/open/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://jianxin.jcy.gov.cn:8084/vp/&quot;</span><span class="token punctuation">,</span>


        <span class="token comment">/*后端人员*/</span>
        <span class="token string">&quot;http://192.168.11.125:8080/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.11.125:8080/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.152:8084/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.152:8084/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.152:8081/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.152:8081/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.152:8080/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.152:8080/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.21.36:8080/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.21.36:8080/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.22.157:8088/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.22.157:8088/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.75:8080/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.75:8080/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.21.49:8080/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.21.49:8080/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.167:8080/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.167:8080/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.22.71:8080/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.22.71:8080/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.22.49:8081/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.22.49:8081/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.38/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.38/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.38:80/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.38:80/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.13:8080/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.13:8080/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.126/wxqyh/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http://192.168.23.126/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">replaceWith</span><span class="token operator">:</span> <span class="token string">&quot;https://192.168.11.75:8089/vp/&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// replaceWith: &quot;这里换成你们本地运行项目的地址&quot;,</span>
        <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// 脚本注入</span>
<span class="token literal-property property">scriptInject</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token comment">// {</span>
        <span class="token comment">//   describe:&quot;注入JQ&quot;,</span>
        <span class="token comment">//   scriptPath:&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js&quot;,</span>
        <span class="token comment">//   tagName:&quot;head&quot;,</span>
        <span class="token comment">//   // position:'after',</span>
        <span class="token comment">//   noCaching:true,</span>
        <span class="token comment">//   enabled: false</span>
        <span class="token comment">// },</span>
        <span class="token punctuation">{</span>
        <span class="token literal-property property">describe</span><span class="token operator">:</span><span class="token string">&quot;脚本注入使用示例&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// 要注入的脚本路径，可以是本地目录下的脚本，也可以是线上URL脚本</span>
        <span class="token literal-property property">scriptPath</span><span class="token operator">:</span><span class="token string">&quot;D:\\work\\debugTools\\commonInject.js&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// scriptPath:&quot;D:\\work\\debugTools\\qwGuard.js&quot;,</span>

        <span class="token comment">// 指定脚本要放置在哪个dom标签里面，默认html 可选值有：html,body,head,title</span>
        <span class="token literal-property property">tagName</span><span class="token operator">:</span><span class="token string">&quot;head&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// 指定放置在标签的哪个位置，默认是before 可选值有 before,after</span>
        <span class="token comment">// position:'after',</span>
        <span class="token comment">/*禁止注入脚本的缓存，也就是为scriptPath增加时间戳参数，默认true*/</span>
        <span class="token literal-property property">noCaching</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token comment">/*条件限定*/</span>
        <span class="token comment">// urlContain:[</span>
        <span class="token comment">//   &quot;do1.com.cn&quot;,</span>
        <span class="token comment">//   &quot;do1.net.cn&quot;</span>
        <span class="token comment">// ],</span>
        <span class="token comment">// urlUnContain:[],</span>
        <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// callbackAcion 主要用于自由度更高得自定义操作，通常是为了实现某些特定的功能</span>
  <span class="token comment">// 例如修改某个接口的数据，从而跳过界面的操作的设定值，进行某些功能的破解或自动化操作</span>
  <span class="token comment">// 注意：如果匹配的链接过多，很容易导致：数组下标超限/未将对象应用设置到对象实例等错误弹窗提示</span>
<span class="token literal-property property">callbackAcion</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
        <span class="token literal-property property">describe</span><span class="token operator">:</span> <span class="token string">&quot;修复do1开发环境缓存大坑&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">source</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token string">&quot;do1.net.cn&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;do1.com.cn&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">include</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token string">'.jsp'</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">onEvent</span><span class="token operator">:</span><span class="token string">'OnBeforeResponse'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">callback</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oSession<span class="token punctuation">,</span>eventName</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> testStr <span class="token operator">=</span> <span class="token string">'?corp_id=&quot;+corp_id+&quot;&amp;agentCode=&quot;+agentCode'</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span><span class="token function">utilFindInResponse</span><span class="token punctuation">(</span>testStr<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> timestamp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                oSession<span class="token punctuation">.</span><span class="token function">utilDecodeResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> resultStr <span class="token operator">=</span> testStr<span class="token operator">+</span><span class="token string">'+&quot;&amp;t='</span><span class="token operator">+</span>timestamp<span class="token operator">+</span><span class="token string">'&quot;'</span><span class="token punctuation">;</span>
                oSession<span class="token punctuation">.</span><span class="token function">utilReplaceInResponse</span><span class="token punctuation">(</span>testStr<span class="token punctuation">,</span>resultStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">/*将location.reload注入到没被缓存的js文件中，救活另外一批缓存文件，请手动启用*/</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'vendor.js'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    oSession<span class="token punctuation">.</span><span class="token function">utilSetResponseBody</span><span class="token punctuation">(</span><span class="token string">'window.onclick = function(){window.location.reload()}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
        <span class="token literal-property property">describe</span><span class="token operator">:</span> <span class="token string">&quot;回调操作示例代码&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">source</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token string">'http://xxxily.cc/dispather-app/dispacher\\?method=dispacher'</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// exclude:[],</span>
        <span class="token literal-property property">include</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token string">'.html'</span><span class="token punctuation">,</span>
        <span class="token string">'.jsp'</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 可选值有：OnBeforeRequest OnPeekAtResponseHeaders OnBeforeResponse OnDone OnReturningError ，想匹配多个事件可以使用|进行分隔</span>
        <span class="token literal-property property">onEvent</span><span class="token operator">:</span><span class="token string">'OnBeforeRequest'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">callback</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oSession<span class="token punctuation">,</span>eventName</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>eventName<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>eventName <span class="token operator">===</span> <span class="token string">'OnBeforeRequest'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> Cookie  <span class="token operator">=</span> oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">[</span><span class="token string">'Cookie'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>Cookie<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'没找到对应的 Cookie'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'callbackTest:'</span><span class="token punctuation">,</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
                oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">[</span><span class="token string">'Cookie'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
        <span class="token literal-property property">describe</span><span class="token operator">:</span> <span class="token string">&quot;篡改登录信息示例&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">source</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token string">'https://xxxily.cc/portal/userLoginAction!checkUser.action'</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">onEvent</span><span class="token operator">:</span><span class="token string">'OnBeforeRequest'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">callback</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oSession<span class="token punctuation">,</span>eventName</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> webForms <span class="token operator">=</span> oSession<span class="token punctuation">.</span><span class="token function">GetRequestBodyAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                strConv <span class="token operator">=</span> coreApi<span class="token punctuation">.</span>strConv<span class="token punctuation">,</span>
                webFormsObj <span class="token operator">=</span> strConv<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>webForms<span class="token punctuation">)</span><span class="token punctuation">;</span>

            webFormsObj<span class="token punctuation">[</span><span class="token string">'username'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;testUser&quot;</span><span class="token punctuation">;</span>
            webFormsObj<span class="token punctuation">[</span><span class="token string">'password'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;testPw&quot;</span><span class="token punctuation">;</span>

            <span class="token comment">/*重设请求参数*/</span>
            oSession<span class="token punctuation">.</span><span class="token function">utilSetRequestBody</span><span class="token punctuation">(</span>strConv<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>webFormsObj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
        <span class="token literal-property property">describe</span><span class="token operator">:</span> <span class="token string">&quot;打卡签到破解&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">source</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token string">'https://qy.do1.com.cn/wxqyh/portal/checkworkAction!addsignin.action\\?dqdp_csrf_token='</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">onEvent</span><span class="token operator">:</span><span class="token string">'OnBeforeRequest'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">callback</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oSession<span class="token punctuation">,</span>eventName</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> webForms <span class="token operator">=</span> oSession<span class="token punctuation">.</span><span class="token function">GetRequestBodyAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                strConv <span class="token operator">=</span> coreApi<span class="token punctuation">.</span>strConv<span class="token punctuation">,</span>
                webFormsObj <span class="token operator">=</span> strConv<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>webForms<span class="token punctuation">)</span><span class="token punctuation">;</span>

            webFormsObj<span class="token punctuation">[</span><span class="token string">'longitude'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;113.35921826535848&quot;</span><span class="token punctuation">;</span>
            webFormsObj<span class="token punctuation">[</span><span class="token string">'latitude'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;23.128247218771186&quot;</span><span class="token punctuation">;</span>
            webFormsObj<span class="token punctuation">[</span><span class="token string">'address'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;广东省广州市天河区员村一横路3号&quot;</span><span class="token punctuation">;</span>

            <span class="token comment">/*重设参数*/</span>
            oSession<span class="token punctuation">.</span><span class="token function">utilSetRequestBody</span><span class="token punctuation">(</span>strConv<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>webFormsObj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>


  <span class="token comment">// 进行字符串查找，如果查找到将在Log面板显示查找结果</span>
<span class="token literal-property property">Search</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">inRequestHeaders</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">inResponseHeaders</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">inResponseBody</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 界面显示配置【可以对不同链接进行颜色标识，以便快速定位相关链接】</span>
<span class="token constant">UI</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 默认文本颜色</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#c0c0c0&quot;</span><span class="token punctuation">,</span><span class="token comment">//灰白色</span>
    <span class="token comment">// 默认背景颜色</span>
    <span class="token literal-property property">bgColor</span><span class="token operator">:</span> <span class="token string">&quot;#2c2c2c&quot;</span><span class="token punctuation">,</span><span class="token comment">//浅黑</span>
    <span class="token literal-property property">bgColor_02</span><span class="token operator">:</span> <span class="token string">&quot;#2f2f2f&quot;</span><span class="token punctuation">,</span><span class="token comment">//浅黑【用于做交替背景，可以不设置】</span>
    <span class="token comment">// bgColor_02:&quot;#4b4a4a&quot;,</span>
    <span class="token comment">// 链接返回报错时的颜色</span>
    <span class="token literal-property property">onError</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// bgColor:&quot;#2c2c2c&quot;,</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#FF0000&quot;</span> <span class="token comment">//错误红</span>
        <span class="token comment">// ,bold:&quot;true&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 不同关键词匹配对应的连接颜色，key 对应的是匹配的关键字，val对应的是匹配的颜色</span>
    <span class="token literal-property property">linkColor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;^http&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ccccff&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;^https&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ccffff&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;\\.jpg|\\.png|\\.gif&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ffccff&quot;</span><span class="token punctuation">,</span> <span class="token comment">//粉紫色</span>
        <span class="token string-property property">&quot;\\.js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#00ff00&quot;</span><span class="token punctuation">,</span> <span class="token comment">//原谅色</span>
        <span class="token string-property property">&quot;\\.css&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ffcc66&quot;</span><span class="token punctuation">,</span> <span class="token comment">//米黄</span>
        <span class="token string-property property">&quot;\\.html&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#00d7ff&quot;</span><span class="token punctuation">,</span> <span class="token comment">//蓝色</span>
        <span class="token string-property property">&quot;\\.php&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fff32d&quot;</span><span class="token punctuation">,</span> <span class="token comment">//大黄</span>
        <span class="token string-property property">&quot;\\.jsp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fd4107&quot;</span> <span class="token comment">//砖红</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 根据 contentType 匹配连接颜色</span>
    <span class="token literal-property property">contentTypeColor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;image&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ffccff&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;css&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ffcc66&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// html 类型容易跟其他接口数据混淆，无特别明确情况下不建议对其进行特殊标识</span>
        <span class="token comment">// &quot;html&quot;:&quot;#00d7ff&quot;,</span>
        <span class="token string-property property">&quot;javascript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#00ff00&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 可以为特殊状态码设置不同颜色，方便快速定位一些错误链接，例如404等</span>
    <span class="token comment">// 注意：这个只是根据responseCode 来匹配的，一些不存在response的链接配置是无效的，例如 502,504状态，应该是在onError里配置的</span>
    <span class="token literal-property property">statusCode</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;404|408|500|502|504&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#FF0000&quot;</span><span class="token punctuation">,</span> <span class="token comment">//错误红</span>
        <span class="token string-property property">&quot;304&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#5e5e5e&quot;</span> <span class="token comment">//浅灰色</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 高亮，对特殊的链接进行高亮设置，方便跟踪查看链接</span>
    <span class="token literal-property property">highlight</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;coinhive.com&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#FF0000&quot;</span><span class="token punctuation">,</span> <span class="token comment">//警告红</span>
        <span class="token literal-property property">bold</span><span class="token operator">:</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">describe</span><span class="token operator">:</span> <span class="token string">&quot;发现挖矿脚本&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">/*
      &quot;.action&quot;: {
        color: &quot;#FF0000&quot;, //警告红
        describe: &quot;标红接口，好快速定位接口连接&quot;
      },
      */</span>
      <span class="token comment">/*
      &quot;positionAjax.json&quot;: {
        color: &quot;#FF0000&quot;, //警告红
        describe: &quot;标红接口，好快速定位接口连接&quot;
      },
      */</span>
      <span class="token comment">/*
      &quot;http://localhost|192.168&quot;:{
          // bgColor:&quot;#2c2c2c&quot;, //浅黑
          color:&quot;#00ff00&quot;, //原谅色
          bold:&quot;true&quot;,
          describe:&quot;高亮测试&quot;
      },
      &quot;youdao.com&quot;:{
          bgColor:&quot;#FF0000&quot;, //红色
          color:&quot;#fdf404&quot;, //黄色
          bold:&quot;true&quot;,
          describe:&quot;高亮测试&quot;
      },
      &quot;google.com|googleapis.com&quot;:{
          bgColor:&quot;#00ff00&quot;, //原谅色
          color:&quot;#fdf404&quot;, //黄色
          bold:&quot;true&quot;,
          describe:&quot;高亮测试&quot;
      },
      */</span>
    <span class="token string-property property">&quot;&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 一些实用工具集，先列个可能会开发的工具集，留个坑以后有时间再开发</span>
<span class="token literal-property property">Tools</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO API 测试工具</span>
    <span class="token literal-property property">apiTest</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// TODO 重放攻击工具&gt;</span>
    <span class="token literal-property property">replay</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// TODO 内容注入工具</span>
    <span class="token literal-property property">contentInject</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// TODO 类似 weinre 这样的注入调试工具</span>
    <span class="token literal-property property">weinre</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 多项分隔符号【同一个配置需匹配多项规则时可以通过分隔符进行区分，这样就不用每个规则都要新开一份配置那么繁琐】</span>
<span class="token literal-property property">splitStr</span><span class="token operator">:</span> <span class="token string">&quot;|&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 正则匹配的修饰符：i,g,m 默认i，不区分大小写</span>
<span class="token literal-property property">regAttr</span><span class="token operator">:</span> <span class="token string">&quot;i&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//全局配置项 END</span>

<span class="token comment">// 调试方法 BEGIN</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>console<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> console <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> arg3<span class="token punctuation">,</span> arg4<span class="token punctuation">,</span> arg5<span class="token punctuation">,</span> arg6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 不支持 arguments ，尴尬！</span>
            <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> arg3<span class="token punctuation">,</span> arg4<span class="token punctuation">,</span> arg5<span class="token punctuation">,</span> arg6<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> argsLen <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> arg <span class="token operator">=</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> arg <span class="token operator">===</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                argsLen <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>

                <span class="token keyword">var</span> argType <span class="token operator">=</span> <span class="token keyword">typeof</span> arg<span class="token punctuation">;</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>argType <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">||</span> argType <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    FiddlerObject<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>argType <span class="token operator">===</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    FiddlerObject<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;boolean:&quot;</span> <span class="token operator">+</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>argType <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> arg<span class="token punctuation">.</span>toString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    FiddlerObject<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        FiddlerObject<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;尝试遍历输出：&quot;</span> <span class="token operator">+</span> argType<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token keyword">in</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            FiddlerObject<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> arg<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        FiddlerObject<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;遍历输出失败：&quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        FiddlerObject<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>argsLen <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                FiddlerObject<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;----------------------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>alert<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> alert <span class="token operator">=</span> FiddlerObject<span class="token punctuation">.</span>alert<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 调试方法 END</span>

<span class="token comment">/*核心API 内置一些常用的方法 BEGIN*/</span>
<span class="token keyword">var</span> <span class="token literal-property property">coreApi</span><span class="token operator">:</span> Object <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/*字符串转换器*/</span>
    <span class="token literal-property property">strConv</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">/**
     * 把具有某些规则的字符串转换为对象字面量，例如：a=1&amp;b=2&amp;c=3
     * @param regularStr （String） -必选，某个规则的字符串
     * #param splitStr （String） -可选 分隔符，默认&amp;
     */</span>
    <span class="token function-variable function">parse</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token function">parse</span> <span class="token punctuation">(</span><span class="token parameter">regularStr<span class="token punctuation">,</span>splitStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> str <span class="token operator">=</span> regularStr <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
            splitStr <span class="token operator">=</span> splitStr <span class="token operator">||</span> <span class="token string">'&amp;'</span><span class="token punctuation">,</span>
            obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            arr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>splitStr<span class="token punctuation">)</span><span class="token punctuation">,</span>
            len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> curArr <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            obj<span class="token punctuation">[</span>curArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> curArr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>str<span class="token punctuation">)</span><span class="token punctuation">{</span>
            obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> obj <span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 把使用上面的parse方法转换的对象，重新转换成字符串表达形式
     * @param obj （object） -必选，某个对象
     * #param splitStr （String） -可选 分隔符，默认&amp;
     */</span>
    <span class="token function-variable function">stringify</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span>splitStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> splitStr <span class="token operator">=</span> splitStr <span class="token operator">||</span> <span class="token string">'&amp;'</span><span class="token punctuation">,</span>
            strArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> val <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span>
                valType <span class="token operator">=</span> <span class="token keyword">typeof</span> val <span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>valType <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">||</span> valType <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> val <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
                strArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token operator">+</span><span class="token string">'='</span><span class="token operator">+</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>valType <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">/*二级对象是不支持的，为了不报错，将二级对象使用[object]进行代替*/</span>
                strArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token operator">+</span><span class="token string">'='</span><span class="token operator">+</span><span class="token string">'[object]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> strArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>splitStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/*核心常用API 内置一些常用的方法 END*/</span>

<span class="token comment">/**
 * 自动移除禁止项，减少后续逻辑不必要的循环消耗
 * @param obj 要操作的对象
 */</span>
<span class="token keyword">function</span> <span class="token function">removeDisableItem</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
        result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> source <span class="token operator">!=</span> <span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> source<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Null]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> source<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">/*跳过enabled为false的项目*/</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Object]'</span> <span class="token operator">&amp;&amp;</span> source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'enabled'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">removeDisableItem</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 实测 GLOBAL_SETTING 每个请求都要加载一次，所以此优化可能出现反效果，后续如果出现很多enabled为false的配置再开启实测下</span>
<span class="token comment">// GLOBAL_SETTING = removeDisableItem(GLOBAL_SETTING);</span>


<span class="token comment">// .NET Framework API document</span>
<span class="token comment">// https://docs.microsoft.com/zh-cn/dotnet/api/index?view=netframework-4.7.2</span>
<span class="token keyword">import</span> System<span class="token punctuation">;</span>
<span class="token keyword">import</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">;</span>
<span class="token keyword">import</span> Fiddler<span class="token punctuation">;</span>
<span class="token comment">// INTRODUCTION</span>
<span class="token comment">//</span>
<span class="token comment">// Well, hello there!</span>
<span class="token comment">//</span>
<span class="token comment">// Don't be scared! :-)</span>
<span class="token comment">//</span>
<span class="token comment">// This is the FiddlerScript Rules file, which creates some of the menu commands and</span>
<span class="token comment">// other features of Fiddler. You can edit this file to modify or add new commands.</span>
<span class="token comment">//</span>
<span class="token comment">// The original version of this file is named SampleRules.js and it is in the</span>
<span class="token comment">// \Program Files\Fiddler\ folder. When Fiddler first runs, it creates a copy named</span>
<span class="token comment">// CustomRules.js inside your \Documents\Fiddler2\Scripts folder. If you make a</span>
<span class="token comment">// mistake in editing this file, simply delete the CustomRules.js file and restart</span>
<span class="token comment">// Fiddler. A fresh copy of the default rules will be created from the original</span>
<span class="token comment">// sample rules file.</span>

<span class="token comment">// The best way to edit this file is to install the FiddlerScript Editor, part of</span>
<span class="token comment">// the free SyntaxEditing addons. Get it here: http://fiddler2.com/r/?SYNTAXVIEWINSTALL</span>

<span class="token comment">// GLOBALIZATION NOTE: Save this file using UTF-8 Encoding.</span>

<span class="token comment">// JScript.NET Reference</span>
<span class="token comment">// http://fiddler2.com/r/?msdnjsnet</span>
<span class="token comment">//</span>
<span class="token comment">// FiddlerScript Reference</span>
<span class="token comment">// http://fiddler2.com/r/?fiddlerscriptcookbook</span>

<span class="token keyword">class</span> <span class="token class-name">Handlers</span> <span class="token punctuation">{</span>
  <span class="token comment">// *****************</span>
  <span class="token comment">//</span>
  <span class="token comment">// This is the Handlers class. Pretty much everything you ever add to FiddlerScript</span>
  <span class="token comment">// belongs right inside here, or inside one of the already-existing functions below.</span>
  <span class="token comment">//</span>
  <span class="token comment">// *****************</span>

  <span class="token comment">// The following snippet demonstrates a custom-bound column for the Web Sessions list.</span>
  <span class="token comment">// See http://fiddler2.com/r/?fiddlercolumns for more info</span>
  <span class="token comment">/*
   public static BindUIColumn(&quot;Method&quot;, 60)
   function FillMethodColumn(oS: Session): String {
   return oS.RequestMethod;
   }
   */</span>

  <span class="token comment">// The following snippet demonstrates how to create a custom tab that shows simple text</span>
  <span class="token comment">/*
   public BindUITab(&quot;Flags&quot;)
   static function FlagsReport(arrSess: Session[]):String {
   var oSB: System.Text.StringBuilder = new System.Text.StringBuilder();
   for (var i:int = 0; i&lt;arrSess.Length; i++)
   {
   oSB.AppendLine(&quot;SESSION FLAGS&quot;);
   oSB.AppendFormat(&quot;{0}: {1}\n&quot;, arrSess[i].id, arrSess[i].fullUrl);
   for(var sFlag in arrSess[i].oFlags)
   {
   oSB.AppendFormat(&quot;\t{0}:\t\t{1}\n&quot;, sFlag.Key, sFlag.Value);
   }
   }
   return oSB.ToString();
   }
   */</span>

  <span class="token comment">// You can create a custom menu like so:</span>
  <span class="token comment">/*
   QuickLinkMenu(&quot;&amp;Links&quot;)
   QuickLinkItem(&quot;IE GeoLoc TestDrive&quot;, &quot;http://ie.microsoft.com/testdrive/HTML5/Geolocation/Default.html&quot;)
   QuickLinkItem(&quot;FiddlerCore&quot;, &quot;http://fiddler2.com/fiddlercore&quot;)
   public static function DoLinksMenu(sText: String, sAction: String)
   {
   Utilities.LaunchHyperlink(sAction);
   }
   */</span>

  <span class="token comment">/*参考文档 BEGIN*/</span>
<span class="token function">QuickLinkMenu</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;Docs&quot;</span><span class="token punctuation">)</span>
<span class="token function">QuickLinkItem</span><span class="token punctuation">(</span><span class="token string">&quot;FiddlerScript&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://docs.telerik.com/fiddler/KnowledgeBase/FiddlerScript/ModifyRequestOrResponse&quot;</span><span class="token punctuation">)</span>
<span class="token function">QuickLinkItem</span><span class="token punctuation">(</span><span class="token string">&quot;Fiddler-plus&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;https://github.com/xxxily/Fiddler-plus&quot;</span><span class="token punctuation">)</span>
<span class="token function">QuickLinkItem</span><span class="token punctuation">(</span><span class="token string">&quot;FiddlerScript-API&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;https://github.com/xxxily/Fiddler-plus/blob/master/doc/FiddlerScript_api_reference.md&quot;</span><span class="token punctuation">)</span>
<span class="token function">QuickLinkItem</span><span class="token punctuation">(</span><span class="token string">&quot;.netFramework.4.7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;https://docs.microsoft.com/zh-cn/dotnet/api/index?view=netframework-4.7.2&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">DoLinksMenu</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">sText</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token literal-property property">sAction</span><span class="token operator">:</span> String</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Utilities<span class="token punctuation">.</span><span class="token function">LaunchHyperlink</span><span class="token punctuation">(</span>sAction<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
  <span class="token comment">/*参考文档 END*/</span>

  <span class="token comment">/*Fiddler-plus 选项开关 BEGIN*/</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;disable All plus rules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Fiddler-plus&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_off_allPlusRules</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;disable Filter rules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Fiddler-plus&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_off_filterRules</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;disable Promiscuous mode&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Fiddler-plus&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_off_promiscuousMode</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;disable Tunnel To&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Fiddler-plus&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_off_tunnelTo</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;disable Replace rules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Fiddler-plus&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_off_replaceRules</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;disable Inject rules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Fiddler-plus&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_off_injectRules</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;disable callbackAcion&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Fiddler-plus&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_off_callbackAcion</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token comment">/*Fiddler-plus 选项开关 END*/</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;Hide 304s&quot;</span><span class="token punctuation">)</span>
<span class="token function">BindPref</span><span class="token punctuation">(</span><span class="token string">&quot;fiddlerscript.rules.Hide304s&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_Hide304s</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token comment">// Cause Fiddler to override the Accept-Language header with one of the defined values</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;Request &amp;Japanese Content&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_Japanese</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token comment">// Automatic Authentication</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;Automatically Authenticate&quot;</span><span class="token punctuation">)</span>

<span class="token function">BindPref</span><span class="token punctuation">(</span><span class="token string">&quot;fiddlerscript.rules.AutoAuth&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_AutoAuth</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token comment">// Cause Fiddler to override the User-Agent header with one of the defined values</span>
  <span class="token comment">// The page http://browserscope2.org/browse?category=selectors&amp;ua=Mobile%20Safari is a good place to find updated versions of these</span>
<span class="token function">RulesString</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;User-Agents&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token function">BindPref</span><span class="token punctuation">(</span><span class="token string">&quot;fiddlerscript.ephemeral.UserAgentString&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;Netscape &amp;3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/3.0 (Win95; I)&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;WinPhone8.1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Mobile; Windows Phone 8.1; Android 4.0; ARM; Trident/7.0; Touch; rv:11.0; IEMobile/11.0; NOKIA; Lumia 520) like iPhone OS 7_0_3 Mac OS X AppleWebKit/537 (KHTML, like Gecko) Mobile Safari/537&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;&amp;Safari5 (Win7)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/533.21.1 (KHTML, like Gecko) Version/5.0.5 Safari/533.21.1&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;Safari9 (Mac)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11) AppleWebKit/601.1.56 (KHTML, like Gecko) Version/9.0 Safari/601.1.56&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;iPad&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (iPad; CPU OS 8_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Version/8.0 Mobile/12F5027d Safari/600.1.4&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&quot;iPhone6&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 8_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Version/8.0 Mobile/12F70 Safari/600.1.4&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">&quot;IE &amp;6 (XPSP2)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">&quot;IE &amp;7 (Vista)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; SLCC1)&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">&quot;IE 8 (Win2k3 x64)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.2; WOW64; Trident/4.0)&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token string">&quot;IE &amp;8 (Win7)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0)&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&quot;IE 9 (Win7)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">&quot;IE 10 (Win8)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0)&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">&quot;IE 11 (Surface2)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Windows NT 6.3; ARM; Trident/7.0; Touch; rv:11.0) like Gecko&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token string">&quot;IE 11 (Win8.1)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0) like Gecko&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token string">&quot;Edge (Win10)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Windows NT 10.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.11082&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token string">&quot;&amp;Opera&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Opera/9.80 (Windows NT 6.2; WOW64) Presto/2.12.388 Version/12.17&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token string">&quot;&amp;Firefox 3.6&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.7) Gecko/20100625 Firefox/3.6.7&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token string">&quot;&amp;Firefox 43&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Windows NT 6.3; WOW64; rv:43.0) Gecko/20100101 Firefox/43.0&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">&quot;&amp;Firefox Phone&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Mobile; rv:18.0) Gecko/18.0 Firefox/18.0&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token string">&quot;&amp;Firefox (Mac)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:24.0) Gecko/20100101 Firefox/24.0&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">&quot;Chrome (Win)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.48 Safari/537.36&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token string">&quot;Chrome (Android)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Linux; Android 5.1.1; Nexus 5 Build/LMY48B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.78 Mobile Safari/537.36&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token string">&quot;ChromeBook&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (X11; CrOS x86_64 6680.52.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.74 Safari/537.36&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">&quot;GoogleBot Crawler&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token string">&quot;Kindle Fire (Silk)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_3; en-us; Silk/1.0.22.79_10013310) AppleWebKit/533.16 (KHTML, like Gecko) Version/5.0 Safari/533.16 Silk-Accelerated=true&quot;</span><span class="token punctuation">)</span>

<span class="token function">RulesStringValue</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token string">&quot;&amp;Custom...&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;%CUSTOM%&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">var</span> <span class="token literal-property property">sUA</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token comment">// Cause Fiddler to delay HTTP traffic to simulate typical 56k modem conditions</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;Simulate &amp;Modem Speeds&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Per&amp;formance&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_SimulateModem</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token comment">// Removes HTTP-caching related headers and specifies &quot;no-cache&quot; on requests and responses</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;Disable Caching&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Per&amp;formance&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">// 默认禁止缓存</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_DisableCaching</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">RulesOption</span><span class="token punctuation">(</span><span class="token string">&quot;Cache Always &amp;Fresh&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Per&amp;formance&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token literal-property property">m_AlwaysFresh</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token comment">// Force a manual reload of the script file.  Resets all</span>
  <span class="token comment">// RulesOption variables to their defaults.</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">ToolsAction</span><span class="token punctuation">(</span><span class="token string">&quot;Reset Script&quot;</span><span class="token punctuation">)</span> <span class="token keyword">function</span> <span class="token function">DoManualReload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    FiddlerObject<span class="token punctuation">.</span><span class="token function">ReloadScript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">ContextAction</span><span class="token punctuation">(</span><span class="token string">&quot;Decode Selected Sessions&quot;</span><span class="token punctuation">)</span> <span class="token keyword">function</span> <span class="token function">DoRemoveEncoding</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">oSessions</span><span class="token operator">:</span> Session<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> <span class="token literal-property property">x</span><span class="token operator">:</span> int <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> oSessions<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSessions<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">utilDecodeRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oSessions<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">utilDecodeResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actUpdateInspector</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment">// ------------ 通用公共方法 BEGIN ------------</span>

  <span class="token comment">/**
   * 准确地获取对象的具体类型 参见：https://www.talkingcoder.com/article/6333557442705696719
   * @param obj { all } -必选 要判断的对象
   * @returns {*} 返回判断的具体类型
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span>
        obj<span class="token punctuation">.</span>constructor <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">function\s(.+?)\(</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span>
        <span class="token keyword">typeof</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 判断某个字符串是否和另外一个字符串相匹配，是对 System.Text.RegularExpressions.Regex.IsMatch 的简单封装
   * @param s_str (String) -必选 源字符串
   * @param m_str (String) -必选 需要匹配的字符串
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">isMatch</span><span class="token punctuation">(</span><span class="token parameter">s_str<span class="token punctuation">,</span> m_str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">.</span>RegularExpressions<span class="token punctuation">.</span>Regex<span class="token punctuation">.</span><span class="token function">IsMatch</span><span class="token punctuation">(</span>s_str<span class="token punctuation">,</span> m_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 根据字符串创建一个正则表达式
   * @param str (String) -必选 正则字符串
   * @param attributes (String) -可选 匹配修饰符，i,g,m, 默认不添加任何修饰符
   */</span>
<span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">createPattern</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> attributes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> att <span class="token operator">=</span> attributes <span class="token operator">||</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>regAttr <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> att<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 判断某个字符串是否存在另外一个字符串里面，如果存在则进行相关回调操作，不存在则忽略
   * @param s_str (String) -必选 源字符串
   * @param m_str (String) -必选 需要匹配的字符串
   * @param callback (Function) -必选 匹配成功的回调操作，回调中返回匹配到的字符串、源字符串、需匹配的字符串
   * @param splitStr (String) -可选 多项分隔符，默认为|,
   * @param attributes (String) -可选 匹配修饰符，i,g,m, 默认不添加任何修饰符
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">matchPlus</span><span class="token punctuation">(</span><span class="token parameter">s_str<span class="token punctuation">,</span> m_str<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> splitStr<span class="token punctuation">,</span> attributes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>s_str <span class="token operator">||</span> <span class="token operator">!</span>m_str <span class="token operator">||</span> <span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> spStr <span class="token operator">=</span> splitStr <span class="token operator">||</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>splitStr <span class="token operator">||</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span>
        att <span class="token operator">=</span> attributes <span class="token operator">||</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>regAttr <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        regArr <span class="token operator">=</span> m_str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>spStr<span class="token punctuation">)</span><span class="token punctuation">,</span>
        len <span class="token operator">=</span> regArr<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
        i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        canBreak <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> regStr <span class="token operator">=</span> regArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// var patt = new RegExp(regStr,att);</span>
        <span class="token keyword">var</span> patt <span class="token operator">=</span> <span class="token function">createPattern</span><span class="token punctuation">(</span>regStr<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>patt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            canBreak <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>patt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s_str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            canBreak <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>regStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>canBreak <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 根据配置项 匹配 oSession里面的url对象，进行相关处理，注意：为了方便查看，配置项使用&quot;|&quot;进行多项分隔，所以如果写复杂的正则也包含|时会存在匹配冲突
   * 故有特殊需要的可以改变下面代码中的分隔符，使其能进行更复杂的正则匹配（配置项注意使用跟如下一致的分隔符）
   * @param str (String) -必选 要进行匹配判断的字符串（例如url）
   * @param settingItem (Object|Array) -必选 GLOBAL_SETTING 下的某个配置项，可以是对象，也可以是数组
   * @param callback (Function) -必选 如果存在跟配置项匹配的选项则进行相关回调处理
   * @param errorMsg (String) -可选 出错时提示信息，方便快速定位问题
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">settingMatch</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> settingItem<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> errorMsg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">var</span> settingItemType <span class="token operator">=</span> <span class="token function">getType</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>str <span class="token operator">||</span> <span class="token operator">!</span>settingItem <span class="token operator">||</span> <span class="token punctuation">(</span>settingItemType <span class="token operator">===</span> <span class="token string">&quot;array&quot;</span> <span class="token operator">&amp;&amp;</span> settingItem<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> canBreak <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 是否可以终止循环，停掉没必要的循环，减少资源消耗</span>
    <span class="token keyword">var</span> errorMsg <span class="token operator">=</span> errorMsg <span class="token operator">||</span> <span class="token string">&quot;url匹配时出现错误，请检查您的配置&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 为了节省代码类型为object 和 array的其实可以合并一起处理，这里为了区分对待，暂时不打算合并</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>settingItemType <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 对象类的配置是包含匹配项和下级配置项的，所以要进行特殊处理</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> itemKw <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token keyword">in</span> settingItem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">matchPlus</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> itemKw<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>matchStr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        canBreak <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">[</span>itemKw<span class="token punctuation">]</span><span class="token punctuation">,</span> matchStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> canBreak<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>canBreak <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>settingItemType <span class="token operator">===</span> <span class="token string">&quot;array&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 数组类的配置项其实和字符串类的配置项一样，只是为了进行多项配置时查看更方便</span>
        <span class="token keyword">var</span> tmLen <span class="token operator">=</span> settingItem<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tmLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">matchPlus</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> settingItem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>matchStr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        canBreak <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> matchStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> canBreak<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>canBreak <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>settingItemType <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 字符串类的配置，只关注是否匹配成功，不存在下级配置项</span>
        <span class="token function">matchPlus</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> settingItem<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>matchStr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    canBreak <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">,</span> matchStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> canBreak<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 所有参数和settingMatch一致，唯一区别是，在不匹配时进行回调，回调里不带任何参数
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">settingUnMatch</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> settingItem<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> errorMsg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> isMatch <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">settingMatch</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> settingItem<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            isMatch <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isMatch <span class="token operator">&amp;&amp;</span> result <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 判断是否通过了URL的约束限定
   * @param fullUrl (string) -必选 完整的url地址
   * @param contain (array|string) -必选 包含某些字符串
   * @param unContain (array|string) -必选 不包含某些字符串
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">isPassUrlRestriction</span><span class="token punctuation">(</span><span class="token parameter">fullUrl<span class="token punctuation">,</span> contain<span class="token punctuation">,</span> unContain</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> isPass <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// urlContain限定</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>isPass <span class="token operator">&amp;&amp;</span> contain <span class="token operator">&amp;&amp;</span> contain<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">settingUnMatch</span><span class="token punctuation">(</span>fullUrl<span class="token punctuation">,</span> contain<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                isPass <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【isPassUrlRestriction里面的urlContain】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// urlUnContain限定</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>isPass <span class="token operator">&amp;&amp;</span> unContain <span class="token operator">&amp;&amp;</span> unContain<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">settingMatch</span><span class="token punctuation">(</span>fullUrl<span class="token punctuation">,</span> unContain<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                isPass <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【isPassUrlRestriction里面的urlContain】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> isPass<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 判断某个字符串是否为本地路径
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">isLocalPath</span><span class="token punctuation">(</span><span class="token parameter">pathStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z]:\\\w*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>pathStr<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 把链接地址统一成数组形式
   * @param links (string|array) -必选 链接地址
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">linksToArr</span><span class="token punctuation">(</span><span class="token parameter">links</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>links <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> links <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>links<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>links<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        arr <span class="token operator">=</span> links<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 跟进分割字符串提取后面的路径片段
   * @param fullUrl (string) -必选 完整的url地址
   * @param splitStr (string) -必选 分割字符串
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">extractPathSection</span><span class="token punctuation">(</span><span class="token parameter">fullUrl<span class="token punctuation">,</span>splitStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> fullUrl<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>splitStr<span class="token punctuation">,</span><span class="token string">'|cutoff|'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^.*\|cutoff\|</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 进行本地路径拼接
   * @param localPath (string) -必选 本地路径（起始段）
   * @param pathSection (string) -必选 需拼接起来的路径片段
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">joinLocalPath</span><span class="token punctuation">(</span><span class="token parameter">localPath<span class="token punctuation">,</span>pathSection</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> path <span class="token operator">=</span> localPath<span class="token punctuation">,</span>
        section <span class="token operator">=</span> pathSection<span class="token punctuation">;</span>
    <span class="token comment">/*确保path结尾为\*/</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        path<span class="token operator">+=</span><span class="token string">'\\'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/*将/转为\并且删除?或#后面的所有字符串*/</span>
    section <span class="token operator">=</span> section<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">'\\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\?#].*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/*确保section起始不包含\*/</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>section<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        section <span class="token operator">=</span> section<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> realPath <span class="token operator">=</span> <span class="token punctuation">(</span>path<span class="token operator">+</span>section<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> realPath<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 提取需要展示的连接，由于每个连接都要重新提取和进行匹配计算，所以会造成较大的性能开销
   * 此功能处于测试阶段，如果出现较多报错建议 将 m_off_promiscuousMode 设为true
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">extractShowLinks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> showLinks <span class="token operator">=</span> <span class="token function">linksToArr</span><span class="token punctuation">(</span><span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>Filter<span class="token punctuation">.</span>showLinks<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 使用混杂模式的话，自动提取各个选项需要展示的URL地址
     * 由于不进行重复性判断，所以可能会出错和造成性能下降
     * */</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>m_off_promiscuousMode <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>m_off_allPlusRules<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">/*提取replace里面要显示的连接*/</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>replace<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">{</span>
                showLinks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/*提取replacePlus里面要显示的连接*/</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>replacePlus<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> item <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>replacePlus<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>enabled <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token punctuation">{</span>
                showLinks <span class="token operator">=</span> showLinks<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">linksToArr</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/*提取 scriptInject 里面要显示的连接*/</span>
        <span class="token keyword">var</span> hasInjectLocalFile <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>scriptInject<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> item <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>scriptInject<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>enabled <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>scriptPath<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isLocalPath</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>scriptPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    hasInjectLocalFile <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                    showLinks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>scriptPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>urlContain<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    showLinks <span class="token operator">=</span> showLinks<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">linksToArr</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>urlContain<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>hasInjectLocalFile<span class="token punctuation">)</span><span class="token punctuation">{</span>
            showLinks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'locationScriptInjectByFiddlerForDebug.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/*提取callbackAcion里面要显示的连接*/</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>callbackAcion<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> item <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>callbackAcion<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>enabled <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token punctuation">{</span>
                showLinks <span class="token operator">=</span> showLinks<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">linksToArr</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/*提取UI.highlight里面要显示的连接*/</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>highlight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">{</span>
                showLinks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> showLinks<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 脚本注入器
   * @param oSession (session) -必选 session对象
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">scriptInjecter</span><span class="token punctuation">(</span><span class="token parameter">oSession</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>m_off_injectRules <span class="token operator">||</span> m_off_allPlusRules<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> scriptInject <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>scriptInject<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>scriptInject <span class="token operator">&amp;&amp;</span> scriptInject<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> len <span class="token operator">=</span> scriptInject<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> settingItem <span class="token operator">=</span> scriptInject<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>settingItem<span class="token punctuation">.</span>enabled <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> settingItem<span class="token punctuation">.</span>scriptPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token comment">/*将注入的脚本地址内容替换成本地文件，实现本地脚本内容注入*/</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span> oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'locationScriptInjectByFiddlerForDebug'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isLocalPath</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">.</span>scriptPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    oSession<span class="token punctuation">[</span><span class="token string">&quot;x-replywithfile&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> settingItem<span class="token punctuation">.</span>scriptPath<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> isHtmlType <span class="token operator">=</span> oSession<span class="token punctuation">.</span>oResponse<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">ExistsAndContains</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text/html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        isPass <span class="token operator">=</span> <span class="token function">isPassUrlRestriction</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span>settingItem<span class="token punctuation">.</span>urlContain <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>settingItem<span class="token punctuation">.</span>urlUnContain <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

                    <span class="token keyword">if</span><span class="token punctuation">(</span>isHtmlType <span class="token operator">&amp;&amp;</span> isPass<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        oSession<span class="token punctuation">.</span><span class="token function">utilDecodeResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">/*通过了检测，但内容不包含正确的html内容，也不能进行插入操作*/</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span><span class="token function">utilFindInResponse</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                            <span class="token keyword">var</span> oBody <span class="token operator">=</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">.</span>Encoding<span class="token punctuation">.</span><span class="token constant">UTF8</span><span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>responseBodyBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>

                            <span class="token keyword">var</span> beginStr <span class="token operator">=</span> settingItem<span class="token punctuation">.</span>position <span class="token operator">===</span> <span class="token string">'after'</span> <span class="token operator">?</span> <span class="token string">'&lt;/'</span> <span class="token operator">:</span> <span class="token string">'&lt;'</span><span class="token punctuation">,</span>
                                oRegEx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>beginStr<span class="token operator">+</span>settingItem<span class="token punctuation">.</span>tagName<span class="token operator">+</span><span class="token string">'\.*&gt;'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                timestamp <span class="token operator">=</span> settingItem<span class="token punctuation">.</span>noCaching <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">'?injectForDebug='</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                injectTagStr <span class="token operator">=</span> <span class="token string">'&lt;script src=&quot;'</span> <span class="token operator">+</span> settingItem<span class="token punctuation">.</span>scriptPath <span class="token operator">+</span> timestamp <span class="token operator">+</span> <span class="token string">'&quot;&gt;&lt;/script&gt;'</span><span class="token punctuation">;</span>

                            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isLocalPath</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">.</span>scriptPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                injectTagStr <span class="token operator">=</span> <span class="token string">'&lt;script src=&quot;./locationScriptInjectByFiddlerForDebug.js'</span><span class="token operator">+</span> timestamp <span class="token operator">+</span><span class="token string">'&quot;&gt;&lt;/script&gt;'</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>

                            <span class="token keyword">var</span> matchStr <span class="token operator">=</span> oBody<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>oRegEx<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">if</span><span class="token punctuation">(</span>matchStr<span class="token punctuation">)</span><span class="token punctuation">{</span>
                                matchStr <span class="token operator">=</span> matchStr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>

                            <span class="token keyword">var</span> injectStr <span class="token operator">=</span> injectTagStr<span class="token operator">+</span><span class="token string">'\n'</span> <span class="token operator">+</span> matchStr <span class="token punctuation">;</span>
                            <span class="token keyword">if</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">.</span>position <span class="token operator">===</span> <span class="token string">'after'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                injectStr <span class="token operator">=</span> matchStr <span class="token operator">+</span> <span class="token string">'\n'</span> <span class="token operator">+</span> injectTagStr<span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>

                            oBody <span class="token operator">=</span> oBody<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>oRegEx<span class="token punctuation">,</span> injectStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            oSession<span class="token punctuation">.</span><span class="token function">utilSetResponseBody</span><span class="token punctuation">(</span>oBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 简单代理替换
   * @param oSession (session) -必选 session对象
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">replaceAgency</span><span class="token punctuation">(</span><span class="token parameter">oSession</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>m_off_replaceRules <span class="token operator">||</span> m_off_allPlusRules<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 简单替换</span>
    <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>replace<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// System.Text.RegularExpressions.Regex.IsMatch(oSession.fullUrl, &quot;https://&quot; );</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isLocalPath</span><span class="token punctuation">(</span>conf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//进行本地文件替换</span>
                <span class="token keyword">var</span> pathSection <span class="token operator">=</span> <span class="token function">extractPathSection</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span>matchStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> locPath <span class="token operator">=</span> <span class="token function">joinLocalPath</span><span class="token punctuation">(</span>conf<span class="token punctuation">,</span>pathSection<span class="token punctuation">)</span><span class="token punctuation">;</span>
                oSession<span class="token punctuation">[</span><span class="token string">&quot;x-replywithfile&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> locPath<span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件替换成功：'</span><span class="token punctuation">,</span>oSession<span class="token punctuation">.</span>fullUrl <span class="token operator">+</span> <span class="token string">'\n的内容被替换成了如下本地文件的内容：\n'</span> <span class="token operator">+</span> locPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">/*进行url地址替换*/</span>
                oSession<span class="token punctuation">.</span>fullUrl <span class="token operator">=</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">.</span>RegularExpressions<span class="token punctuation">.</span>Regex<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> matchStr<span class="token punctuation">,</span> conf<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【replace】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 高级代理替换
   * @param oSession (session) -必选 session对象
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">replacePlusAgency</span><span class="token punctuation">(</span><span class="token parameter">oSession</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>m_off_replaceRules <span class="token operator">||</span> m_off_allPlusRules<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 执行替换规则</span>
    <span class="token keyword">function</span> <span class="token function">replaceWithRule</span><span class="token punctuation">(</span><span class="token parameter">rule</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>rule<span class="token punctuation">.</span>enabled <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>oSession<span class="token punctuation">[</span><span class="token string">&quot;has-replace&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> rule<span class="token punctuation">.</span>source<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> hasPassCheck <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">;</span>

                    <span class="token comment">// Referer限定</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>hasPassCheck <span class="token operator">&amp;&amp;</span> rule<span class="token punctuation">.</span>Referer <span class="token operator">&amp;&amp;</span> rule<span class="token punctuation">.</span>Referer<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

                        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">[</span><span class="token string">'Referer'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                            hasPassCheck <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>

                        <span class="token function">settingUnMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">[</span><span class="token string">'Referer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rule<span class="token punctuation">.</span>Referer<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchStr02</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                hasPassCheck <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【replacePlus里面的Referer】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token comment">/*请求页面通过限定，才能往下玩*/</span>
                        <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> rule<span class="token punctuation">.</span>Referer<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchStr02</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                hasPassCheck <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【replacePlus里面的Referer】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token punctuation">}</span>

                    <span class="token comment">// url的contain、unContain限定</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>hasPassCheck<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        hasPassCheck <span class="token operator">=</span> <span class="token function">isPassUrlRestriction</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span>rule<span class="token punctuation">.</span>urlContain <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>rule<span class="token punctuation">.</span>urlUnContain <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>

                    <span class="token comment">// 禁止缓存</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>hasPassCheck <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> rule<span class="token punctuation">.</span>disableCaching <span class="token operator">===</span> <span class="token string">'boolean'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        oSession<span class="token punctuation">[</span><span class="token string">&quot;disableCaching&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> rule<span class="token punctuation">.</span>disableCaching<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>

                    <span class="token comment">// 如果存在子级规则，则进行子级递归替换（理论可以上可以进行无限级的递归）</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>hasPassCheck <span class="token operator">&amp;&amp;</span> rule<span class="token punctuation">.</span>subRules<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rule<span class="token punctuation">.</span>subRules<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">var</span> subRules <span class="token operator">=</span> rule<span class="token punctuation">.</span>subRules<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                            <span class="token function">replaceWithRule</span><span class="token punctuation">(</span>subRules<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>

                    <span class="token comment">// 执行替换操作</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>hasPassCheck <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>oSession<span class="token punctuation">[</span><span class="token string">&quot;has-replace&quot;</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> rule<span class="token punctuation">.</span>replaceWith<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token function">isLocalPath</span><span class="token punctuation">(</span>rule<span class="token punctuation">.</span>replaceWith<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
                            <span class="token keyword">var</span> pathSection <span class="token operator">=</span> <span class="token function">extractPathSection</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span>matchStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">var</span> locPath <span class="token operator">=</span> <span class="token function">joinLocalPath</span><span class="token punctuation">(</span>rule<span class="token punctuation">.</span>replaceWith<span class="token punctuation">,</span>pathSection<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            oSession<span class="token punctuation">[</span><span class="token string">&quot;x-replywithfile&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> locPath<span class="token punctuation">;</span>
                            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件替换成功：'</span><span class="token punctuation">,</span>oSession<span class="token punctuation">.</span>fullUrl <span class="token operator">+</span> <span class="token string">'\n的内容被替换成了如下本地文件的内容：\n'</span> <span class="token operator">+</span> locPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                            <span class="token keyword">var</span> newUrl <span class="token operator">=</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">.</span>RegularExpressions<span class="token punctuation">.</span>Regex<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> matchStr<span class="token punctuation">,</span> rule<span class="token punctuation">.</span>replaceWith<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            oSession<span class="token punctuation">.</span>fullUrl <span class="token operator">=</span> newUrl<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>

                        <span class="token function">setSessionDisplay</span><span class="token punctuation">(</span>oSession<span class="token punctuation">,</span> rule<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token comment">// 标注已被替换过 防多次替换，也意味着子级的替换优先级高于父级的</span>
                        oSession<span class="token punctuation">[</span><span class="token string">&quot;has-replace&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>

                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【replacePlus】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 高级替换</span>
    <span class="token keyword">var</span> replacePlus <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>replacePlus<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>replacePlus <span class="token operator">&amp;&amp;</span> replacePlus<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> len <span class="token operator">=</span> replacePlus<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> rule <span class="token operator">=</span> replacePlus<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token function">replaceWithRule</span><span class="token punctuation">(</span>rule<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">// 用于背景做交替显示的记号</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">var</span> showLinkCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token comment">/**
   * 隐藏连接，为了确保程序没错误隐藏连接，固写成统一的方法，方便快速调试
   * @param oSession (Session) -必选，Session 对象
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">hideLink</span><span class="token punctuation">(</span><span class="token parameter">oSession</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(&quot;以下连接已被隐藏：&quot;,oSession.fullUrl);</span>
    showLinkCount <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-hide&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">;</span>
    oSession<span class="token punctuation">.</span><span class="token function">Ignore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 隐藏连接，TunnelTo 一堆无用连接
   * @param oSession (Session) -必选，Session 对象
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">hideTunnelToLink</span><span class="token punctuation">(</span><span class="token parameter">oSession</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO 过滤 tunnel to 连接 待优化</span>
    <span class="token keyword">var</span> hideTunnelTo <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>Filter<span class="token punctuation">.</span>hideTunnelTo<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>hideTunnelTo <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>m_off_tunnelTo <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>m_off_allPlusRules<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">':443'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">hideLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【hideTunnelTo】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 每个匹配链接的回调操作对象
   * @param oSession (Session) -必选，Session 对象
   * @param eventName (String) -必选，回调事件名称 可选值有：OnBeforeRequest OnPeekAtResponseHeaders OnBeforeResponse OnDone OnReturningError
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">sessionCallback</span><span class="token punctuation">(</span><span class="token parameter">oSession<span class="token punctuation">,</span>eventName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>m_off_allPlusRules <span class="token operator">||</span> m_off_callbackAcion <span class="token operator">||</span> <span class="token operator">!</span>oSession <span class="token operator">||</span> <span class="token operator">!</span>eventName <span class="token operator">||</span> <span class="token operator">!</span>settingMatch<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// console.log('出现【未将对象引用设置到对象实例】的错误~');</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> callbackAcion <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>callbackAcion<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>callbackAcion <span class="token operator">&amp;&amp;</span> callbackAcion<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> len <span class="token operator">=</span> callbackAcion<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> settingItem <span class="token operator">=</span> callbackAcion<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

            <span class="token comment">/*指定要匹配的事件，减少不必要的回调操作*/</span>
            <span class="token keyword">var</span> eventPatt <span class="token operator">=</span> <span class="token function">createPattern</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">[</span><span class="token string">'onEvent'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>settingItem<span class="token punctuation">.</span>enabled <span class="token operator">&amp;&amp;</span> eventPatt<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>eventName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> settingItem<span class="token punctuation">.</span>source<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                        <span class="token keyword">if</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">.</span>include<span class="token punctuation">)</span><span class="token punctuation">{</span>
                            <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span>settingItem<span class="token punctuation">.</span>include<span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span>matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    settingItem<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>oSession<span class="token punctuation">,</span>eventName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;【callbackAcion_include】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">.</span>exclude<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token function">settingUnMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span>settingItem<span class="token punctuation">.</span>include<span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    settingItem<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>oSession<span class="token punctuation">,</span>eventName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;【callbackAcion_exclude】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                            settingItem<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>oSession<span class="token punctuation">,</span>eventName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>

                        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【callbackAcion】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 设置 Session 的界面呈现
   * @param oSession (Session) -必选，Session 对象
   * @param conf (Object) -可选，要设置 Session 呈现的界面配置，形如：{bgColor:&quot;#2c2c2c&quot;,color:&quot;#FF0000&quot;,bold:true}
   */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">setSessionDisplay</span><span class="token punctuation">(</span><span class="token parameter">oSession<span class="token punctuation">,</span> conf</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    conf<span class="token punctuation">.</span>bgColor <span class="token operator">?</span> oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-backcolor&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> conf<span class="token punctuation">.</span>bgColor <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    conf<span class="token punctuation">.</span>color <span class="token operator">?</span> oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-color&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> conf<span class="token punctuation">.</span>color <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    conf<span class="token punctuation">.</span>bold <span class="token operator">?</span> oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-bold&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">oSessionCore</span><span class="token punctuation">(</span><span class="token parameter">oSession<span class="token punctuation">,</span> opt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>oSession<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 核心方法</span>
    <span class="token keyword">var</span> core <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">/**
       * 设置 Session 的界面呈现
       * @param oSession (Session) -必选，Session 对象
       * @param conf (Object) -可选，要设置 Session 呈现的界面配置，形如：{bgColor:&quot;#2c2c2c&quot;,color:&quot;#FF0000&quot;,bold:true}
       */</span>
      <span class="token function-variable function">setDisplay</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            conf<span class="token punctuation">.</span>bgColor <span class="token operator">?</span> oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-backcolor&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> conf<span class="token punctuation">.</span>bgColor <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            conf<span class="token punctuation">.</span>color <span class="token operator">?</span> oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-color&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> conf<span class="token punctuation">.</span>color <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            conf<span class="token punctuation">.</span>bold <span class="token operator">?</span> oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-bold&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// if(opt instanceof Object &amp;&amp; opt[&quot;run&quot;] &amp;&amp; core[] )</span>
<span class="token punctuation">}</span>

  <span class="token comment">// ------------ 通用公共方法 END ------------</span>

  <span class="token comment">// 参考文档 http://docs.telerik.com/fiddler/KnowledgeBase/FiddlerScript/ModifyRequestOrResponse</span>
<span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">OnBeforeRequest</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">oSession</span><span class="token operator">:</span> Session</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    showLinkCount <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">/*Fiddler有时候会掉链子，所以必须加强判断，才能减少callbackAcion功能的报错提示*/</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>settingMatch <span class="token operator">&amp;&amp;</span> settingUnMatch <span class="token operator">&amp;&amp;</span> oSession<span class="token punctuation">)</span><span class="token punctuation">{</span>
        sessionCallback <span class="token operator">&amp;&amp;</span> <span class="token function">sessionCallback</span><span class="token punctuation">(</span>oSession<span class="token punctuation">,</span><span class="token string">'OnBeforeRequest'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>m_off_filterRules <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>m_off_allPlusRules<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 过滤出需要显示或隐藏的连接 BEGIN</span>

            <span class="token keyword">var</span> showLinks <span class="token operator">=</span> <span class="token function">extractShowLinks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                hideLinks <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>Filter<span class="token punctuation">.</span>hideLinks<span class="token punctuation">;</span>
            <span class="token comment">// 过滤出要显示的连接，把不在显示列表里的连接隐藏掉</span>
            <span class="token function">settingUnMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> showLinks<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">hideLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【showLinks】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 过滤出要隐藏的连接，把在隐藏列表里的连接隐藏掉</span>
            <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> hideLinks<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">hideLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【hideLinks】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 过滤出需要显示或隐藏的连接 END</span>

            <span class="token comment">// 根据头部字段过滤出需要显示或隐藏的连接 BEGIN</span>
            <span class="token keyword">var</span> headerFilter <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>Filter<span class="token punctuation">.</span>headerFieldFilter<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>headerFilter <span class="token operator">&amp;&amp;</span> headerFilter<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> hfLen <span class="token operator">=</span> headerFilter<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> hfLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> settingItem <span class="token operator">=</span> headerFilter<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>settingItem<span class="token punctuation">.</span>enabled <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> settingItem<span class="token punctuation">.</span>workAt <span class="token operator">===</span> <span class="token string">'request'</span> <span class="token operator">&amp;&amp;</span> settingItem<span class="token punctuation">.</span>fieldName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">.</span>display <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
                            <span class="token comment">// 过滤出要显示的连接，把不在显示列表里的连接隐藏掉</span>
                            <span class="token keyword">if</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">[</span>settingItem<span class="token punctuation">.</span>fieldName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                <span class="token function">settingUnMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">[</span>settingItem<span class="token punctuation">.</span>fieldName<span class="token punctuation">]</span><span class="token punctuation">,</span> settingItem<span class="token punctuation">.</span>filterList<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                        <span class="token function">hideLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【headerFieldFilter_show】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                                <span class="token comment">/*不存在对于header属值的，不能直接隐藏，只能后续操作，否则会把其关联的链接也一并隐藏，最后就会导致无任何链接可显示*/</span>
                                <span class="token comment">// hideLink(oSession);</span>
                                <span class="token comment">// console.log('以下链接本该隐藏的，但是由于具有关联性，不能将其马上隐藏：',oSession.fullUrl);</span>
                                oSession<span class="token punctuation">[</span><span class="token string">'hide-me'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'true'</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                            <span class="token comment">// 过滤出要隐藏的连接，把在隐藏列表里的连接隐藏掉</span>
                            <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">[</span>settingItem<span class="token punctuation">.</span>fieldName<span class="token punctuation">]</span><span class="token punctuation">,</span> settingItem<span class="token punctuation">.</span>filterList<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token function">hideLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【headerFieldFilter_hide】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 根据头部字段过滤出需要显示或隐藏的连接 END</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 过滤出要禁止缓存的连接</span>
        <span class="token keyword">var</span> disableCachingList <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>disableCachingList<span class="token punctuation">;</span>
        <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> disableCachingList<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                oSession<span class="token punctuation">[</span><span class="token string">&quot;disableCaching&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【disableCachingList】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// 标注隐藏443链接</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>Filter<span class="token punctuation">.</span>hideTunnelTo <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>m_off_tunnelTo <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>m_off_allPlusRules<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">':443'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    oSession<span class="token punctuation">[</span><span class="token string">'hide-me'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'true'</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【hideTunnelTo】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 配色 BEGIN</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-hide&quot;</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 默认背景【存在 bgColor_02 时进行交替显示】 注：因为http请求的无序特性，所以不能确保百分百准确交替，待深入优化</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>bgColor_02 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>showLinkCount <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-backcolor&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>bgColor_02<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-backcolor&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>bgColor <span class="token operator">||</span> <span class="token string">&quot;#2c2c2c&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 默认文本颜色</span>
            oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-color&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>color<span class="token punctuation">;</span>

            <span class="token comment">// 根据关键词设置连接渲染的颜色</span>
            <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>linkColor<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    conf <span class="token operator">?</span> oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-color&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> conf <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【linkColor】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-hide&quot;</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>skin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> skins <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>skin<span class="token punctuation">,</span>
                skLen <span class="token operator">=</span> skins<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> skLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> skin <span class="token operator">=</span> skins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>skin<span class="token punctuation">.</span>enable <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">//</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 配色 END</span>

        <span class="token comment">// 接管替换URL BEGIN</span>
        <span class="token function">replaceAgency</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">replacePlusAgency</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 接管替换URL END</span>

        <span class="token comment">// 根据关键字进行搜索查找 BEGIN</span>
        <span class="token keyword">var</span> searchInRequestHeaders <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>Search<span class="token punctuation">.</span>inRequestHeaders<span class="token punctuation">,</span>
            searchStrCount <span class="token operator">=</span> searchInRequestHeaders<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> searchStrCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> skw <span class="token operator">=</span> searchInRequestHeaders<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> reqHeaders <span class="token operator">=</span> oSession<span class="token punctuation">.</span>RequestHeaders<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>reqHeaders<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token keyword">in</span> reqHeaders<span class="token punctuation">)</span> <span class="token punctuation">{</span>

                        <span class="token keyword">var</span> result01 <span class="token operator">=</span> <span class="token function">isMatch</span><span class="token punctuation">(</span>reqHeaders<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> skw<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">var</span> result02 <span class="token operator">=</span> <span class="token function">isMatch</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> skw<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>result01 <span class="token operator">||</span> result02<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> <span class="token string">&quot;进行RequestHeaders搜索查找时找到匹配的字符串：&quot;</span> <span class="token operator">+</span> skw<span class="token punctuation">,</span> key <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> reqHeaders<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;进行RequestHeaders遍历搜索时出错,当前搜索关键词为：&quot;</span> <span class="token operator">+</span> skw<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 根据关键字进行搜索查找 END</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Sample Rule: Color ASPX requests in RED</span>
    <span class="token comment">// if (oSession.uriContains(&quot;.aspx&quot;)) { oSession[&quot;ui-color&quot;] = &quot;red&quot;; }</span>

    <span class="token comment">// Sample Rule: Flag POSTs to fiddler2.com in italics</span>
    <span class="token comment">// if (oSession.HostnameIs(&quot;www.fiddler2.com&quot;) &amp;&amp; oSession.HTTPMethodIs(&quot;POST&quot;)) {  oSession[&quot;ui-italic&quot;] = &quot;yup&quot;;  }</span>

    <span class="token comment">// Sample Rule: Break requests for URLs containing &quot;/sandbox/&quot;</span>
    <span class="token comment">// if (oSession.uriContains(&quot;/sandbox/&quot;)) {</span>
    <span class="token comment">//     oSession.oFlags[&quot;x-breakrequest&quot;] = &quot;yup&quot;; // Existence of the x-breakrequest flag creates a breakpoint; the &quot;yup&quot; value is unimportant.</span>
    <span class="token comment">// }</span>

    <span class="token comment">// 通过QuickExec 输入字符串来筛选出要高亮的url</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> filter_and_highlight_url<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> oSession<span class="token punctuation">.</span><span class="token function">uriContains</span><span class="token punctuation">(</span>filter_and_highlight_url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-color&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;#FF0000&quot;</span><span class="token punctuation">;</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-bold&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> gs_ReplaceToken<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>gs_ReplaceToken<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// Case sensitive</span>
        oSession<span class="token punctuation">.</span>fullUrl <span class="token operator">=</span> oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span>gs_ReplaceToken<span class="token punctuation">,</span> gs_ReplaceTokenWith<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> gs_OverridenHost<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>host<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> gs_OverridenHost<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;x-overridehost&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> gs_OverrideHostWith<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> bpRequestURI<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> oSession<span class="token punctuation">.</span><span class="token function">uriContains</span><span class="token punctuation">(</span>bpRequestURI<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;x-breakrequest&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;uri&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> bpMethod<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>oSession<span class="token punctuation">.</span><span class="token function">HTTPMethodIs</span><span class="token punctuation">(</span>bpMethod<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;x-breakrequest&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;method&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> uiBoldURI<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> oSession<span class="token punctuation">.</span><span class="token function">uriContains</span><span class="token punctuation">(</span>uiBoldURI<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-bold&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;QuickExec&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_SimulateModem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Delay sends by 300ms per KB uploaded.</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;request-trickle-delay&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;300&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// Delay receives by 150ms per KB downloaded.</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;response-trickle-delay&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;6500&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_DisableCaching <span class="token operator">||</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>disableCaching <span class="token operator">||</span> oSession<span class="token punctuation">[</span><span class="token string">&quot;disableCaching&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span><span class="token string">&quot;If-None-Match&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span><span class="token string">&quot;If-Modified-Since&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">[</span><span class="token string">&quot;Pragma&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;no-cache&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// User-Agent Overrides</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> sUA<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">[</span><span class="token string">&quot;User-Agent&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> sUA<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_Japanese<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">[</span><span class="token string">&quot;Accept-Language&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;ja&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_AutoAuth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Automatically respond to any authentication challenges using the</span>
        <span class="token comment">// current Fiddler user's credentials. You can change (default)</span>
        <span class="token comment">// to a domain\\username:password string if preferred.</span>
        <span class="token comment">//</span>
        <span class="token comment">// WARNING: This setting poses a security risk if remote</span>
        <span class="token comment">// connections are permitted!</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;X-AutoAuth&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;(default)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_AlwaysFresh <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">Exists</span><span class="token punctuation">(</span><span class="token string">&quot;If-Modified-Since&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">Exists</span><span class="token punctuation">(</span><span class="token string">&quot;If-None-Match&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">.</span><span class="token function">utilCreateResponseAndBypassServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oSession<span class="token punctuation">.</span>responseCode <span class="token operator">=</span> <span class="token number">304</span><span class="token punctuation">;</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-backcolor&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Lavender&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">//OnBeforeRequest END</span>

  <span class="token comment">// This function is called immediately after a set of request headers has</span>
  <span class="token comment">// been read from the client. This is typically too early to do much useful</span>
  <span class="token comment">// work, since the body hasn't yet been read, but sometimes it may be useful.</span>
  <span class="token comment">//</span>
  <span class="token comment">// For instance, see</span>
  <span class="token comment">// http://blogs.msdn.com/b/fiddler/archive/2011/11/05/http-expect-continue-delays-transmitting-post-bodies-by-up-to-350-milliseconds.aspx</span>
  <span class="token comment">// for one useful thing you can do with this handler.</span>
  <span class="token comment">//</span>
  <span class="token comment">// Note: oSession.requestBodyBytes is not available within this function!</span>
  <span class="token comment">/*
   static function OnPeekAtRequestHeaders(oSession: Session) {
   var sProc = (&quot;&quot; + oSession[&quot;x-ProcessInfo&quot;]).ToLower();
   if (!sProc.StartsWith(&quot;mylowercaseappname&quot;)) oSession[&quot;ui-hide&quot;] = &quot;NotMyApp&quot;;
   }
   */</span>

  <span class="token comment">//</span>
  <span class="token comment">// If a given session has response streaming enabled, then the OnBeforeResponse function</span>
  <span class="token comment">// is actually called AFTER the response was returned to the client.</span>
  <span class="token comment">//</span>
  <span class="token comment">// In contrast, this OnPeekAtResponseHeaders function is called before the response headers are</span>
  <span class="token comment">// sent to the client (and before the body is read from the server).  Hence this is an opportune time</span>
  <span class="token comment">// to disable streaming (oSession.bBufferResponse = true) if there is something in the response headers</span>
  <span class="token comment">// which suggests that tampering with the response body is necessary.</span>
  <span class="token comment">//</span>
  <span class="token comment">// Note: oSession.responseBodyBytes is not available within this function!</span>
  <span class="token comment">//</span>
<span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">OnPeekAtResponseHeaders</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">oSession</span><span class="token operator">:</span> Session</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>settingMatch <span class="token operator">&amp;&amp;</span> settingUnMatch <span class="token operator">&amp;&amp;</span> oSession<span class="token punctuation">)</span><span class="token punctuation">{</span>
        sessionCallback <span class="token operator">&amp;&amp;</span> <span class="token function">sessionCallback</span><span class="token punctuation">(</span>oSession<span class="token punctuation">,</span><span class="token string">'OnPeekAtResponseHeaders'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//FiddlerApplication.Log.LogFormat(&quot;Session {0}: Response header peek shows status is {1}&quot;, oSession.id, oSession.responseCode);</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_DisableCaching <span class="token operator">||</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>disableCaching <span class="token operator">||</span> oSession<span class="token punctuation">[</span><span class="token string">&quot;disableCaching&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">.</span>oResponse<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span><span class="token string">&quot;Expires&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oSession<span class="token punctuation">.</span>oResponse<span class="token punctuation">[</span><span class="token string">&quot;Cache-Control&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;no-cache&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>bpStatus <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>responseCode <span class="token operator">==</span> bpStatus<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;x-breakresponse&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;status&quot;</span><span class="token punctuation">;</span>
        oSession<span class="token punctuation">.</span>bBufferResponse <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> bpResponseURI<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> oSession<span class="token punctuation">.</span><span class="token function">uriContains</span><span class="token punctuation">(</span>bpResponseURI<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;x-breakresponse&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;uri&quot;</span><span class="token punctuation">;</span>
        oSession<span class="token punctuation">.</span>bBufferResponse <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">OnBeforeResponse</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">oSession</span><span class="token operator">:</span> Session</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>settingMatch <span class="token operator">&amp;&amp;</span> settingUnMatch <span class="token operator">&amp;&amp;</span> oSession<span class="token punctuation">)</span><span class="token punctuation">{</span>
        sessionCallback <span class="token operator">&amp;&amp;</span> <span class="token function">sessionCallback</span><span class="token punctuation">(</span>oSession<span class="token punctuation">,</span><span class="token string">'OnBeforeResponse'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> contentType <span class="token operator">=</span> oSession<span class="token punctuation">.</span>oResponse<span class="token punctuation">[</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>m_off_filterRules<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 根据头部字段过滤出需要显示或隐藏的连接 BEGIN</span>
            <span class="token keyword">var</span> headerFilter <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>Filter<span class="token punctuation">.</span>headerFieldFilter<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>headerFilter <span class="token operator">&amp;&amp;</span> headerFilter<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> hfLen <span class="token operator">=</span> headerFilter<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> hfLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> settingItem <span class="token operator">=</span> headerFilter<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>settingItem<span class="token punctuation">.</span>enabled <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> settingItem<span class="token punctuation">.</span>workAt <span class="token operator">===</span> <span class="token string">'response'</span> <span class="token operator">&amp;&amp;</span> settingItem<span class="token punctuation">.</span>fieldName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>settingItem<span class="token punctuation">.</span>display <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
                            <span class="token comment">// 过滤出要显示的连接，把不在显示列表里的连接隐藏掉</span>
                            <span class="token keyword">if</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>oRequest<span class="token punctuation">[</span>settingItem<span class="token punctuation">.</span>fieldName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                <span class="token function">settingUnMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>oResponse<span class="token punctuation">[</span>settingItem<span class="token punctuation">.</span>fieldName<span class="token punctuation">]</span><span class="token punctuation">,</span> settingItem<span class="token punctuation">.</span>filterList<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                        <span class="token function">hideLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【headerFieldFilter_show】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                                <span class="token comment">/*不存在对于header属值的，不能直接隐藏，只能后续操作，否则会把其关联的链接也一并隐藏，最后就会导致无任何链接可显示*/</span>
                                <span class="token comment">// hideLink(oSession);</span>
                                <span class="token comment">// console.log('以下链接本该隐藏的，但是由于具有关联性，不能将其马上隐藏：',oSession.fullUrl);</span>
                                oSession<span class="token punctuation">[</span><span class="token string">'hide-me'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'true'</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                            <span class="token comment">// 过滤出要隐藏的连接，把在隐藏列表里的连接隐藏掉</span>
                            <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>oResponse<span class="token punctuation">[</span>settingItem<span class="token punctuation">.</span>fieldName<span class="token punctuation">]</span><span class="token punctuation">,</span> settingItem<span class="token punctuation">.</span>filterList<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token function">hideLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【headerFieldFilter_hide】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 根据头部字段过滤出需要显示或隐藏的连接 END</span>

            <span class="token comment">// 过滤出需要显示或隐藏的连接 BEGIN</span>
            <span class="token keyword">var</span> showContentType <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>Filter<span class="token punctuation">.</span>showContentType<span class="token punctuation">,</span>
                hideContentType <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>Filter<span class="token punctuation">.</span>hideContentType<span class="token punctuation">;</span>

            <span class="token comment">//开启了 ContentType 过滤的时候， 把不带 Content-Type 全部过滤掉</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>contentType <span class="token operator">&amp;&amp;</span> showContentType<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;隐藏不带 ContentType 的连接&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">hideLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 过滤出要显示的连接，把不在显示列表里的连接隐藏掉</span>
            <span class="token function">settingUnMatch</span><span class="token punctuation">(</span>contentType<span class="token punctuation">,</span> showContentType<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">hideLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【showContentType】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 过滤出要隐藏的连接，把在隐藏列表里的连接隐藏掉</span>
            <span class="token function">settingMatch</span><span class="token punctuation">(</span>contentType<span class="token punctuation">,</span> hideContentType<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">hideLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【hideContentType】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 过滤出需要显示或隐藏的连接 END</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 根据contentType显示连接颜色</span>
        <span class="token keyword">var</span> contentTypeColor <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>contentTypeColor<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>responseCode <span class="token operator">&gt;</span> <span class="token number">100</span> <span class="token operator">&amp;&amp;</span> oSession<span class="token punctuation">.</span>responseCode <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">settingMatch</span><span class="token punctuation">(</span>contentType<span class="token punctuation">,</span> contentTypeColor<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    conf <span class="token operator">?</span> oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-color&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> conf <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【contentTypeColor】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 根据不同状态码设置链接颜色</span>
        <span class="token keyword">var</span> statusCode <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>statusCode<span class="token punctuation">;</span>
        <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>responseCode<span class="token punctuation">,</span> statusCode<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-color&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>color<span class="token punctuation">;</span>
                conf <span class="token operator">?</span> oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-color&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> conf <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【statusCode】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">scriptInjecter</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 高亮特殊连接</span>
        <span class="token function">settingMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>highlight<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conf<span class="token punctuation">,</span> matchStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">setSessionDisplay</span><span class="token punctuation">(</span>oSession<span class="token punctuation">,</span> conf<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;【highlight】配置出错，请检查你的配置&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_Hide304s <span class="token operator">&amp;&amp;</span> oSession<span class="token punctuation">.</span>responseCode <span class="token operator">==</span> <span class="token number">304</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-hide&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

  <span class="token comment">//OnBeforeResponse END</span>

  <span class="token comment">// 请求完成时的回调</span>
<span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">OnDone</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">oSession</span><span class="token operator">:</span> Session</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>settingMatch <span class="token operator">&amp;&amp;</span> settingUnMatch <span class="token operator">&amp;&amp;</span> oSession<span class="token punctuation">)</span><span class="token punctuation">{</span>
        sessionCallback <span class="token operator">&amp;&amp;</span> <span class="token function">sessionCallback</span><span class="token punctuation">(</span>oSession<span class="token punctuation">,</span><span class="token string">'OnDone'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 隐藏被标注要隐藏的链接</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>oSession<span class="token punctuation">[</span><span class="token string">'hide-me'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">hideLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 根据关键字进行搜索查找 BEGIN</span>

        <span class="token comment">// 查找ResponseHeaders</span>
        <span class="token keyword">var</span> searchInResponseHeaders <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>Search<span class="token punctuation">.</span>inResponseHeaders<span class="token punctuation">,</span>
            searchStrCount <span class="token operator">=</span> searchInResponseHeaders<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> searchStrCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> skw <span class="token operator">=</span> searchInResponseHeaders<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> resHeaders <span class="token operator">=</span> oSession<span class="token punctuation">.</span>ResponseHeaders<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>resHeaders<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token keyword">in</span> resHeaders<span class="token punctuation">)</span> <span class="token punctuation">{</span>

                        <span class="token keyword">var</span> result01 <span class="token operator">=</span> <span class="token function">isMatch</span><span class="token punctuation">(</span>resHeaders<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> skw<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">var</span> result02 <span class="token operator">=</span> <span class="token function">isMatch</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> skw<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>result01 <span class="token operator">||</span> result02<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> <span class="token string">&quot;进行ResponseHeaders搜索查找时找到匹配的字符串：&quot;</span> <span class="token operator">+</span> skw<span class="token punctuation">,</span> key <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> resHeaders<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;进行ResponseHeaders遍历搜索时出错,当前搜索关键词为：&quot;</span> <span class="token operator">+</span> skw<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 查找ResponseBody</span>
        <span class="token keyword">var</span> searchInResponseBody <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span>Search<span class="token punctuation">.</span>inResponseBody<span class="token punctuation">,</span>
            searchStrCount <span class="token operator">=</span> searchInResponseBody<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>searchStrCount <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> resBody <span class="token operator">=</span> oSession<span class="token punctuation">.</span><span class="token function">GetResponseBodyAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> searchStrCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> skw <span class="token operator">=</span> searchInResponseBody<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isMatch</span><span class="token punctuation">(</span>resBody<span class="token punctuation">,</span> skw<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> <span class="token string">&quot;进行ResponseBody搜索查找时找到匹配的字符串：&quot;</span> <span class="token operator">+</span> skw<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;进行ResponseBody遍历搜索时出错,当前搜索关键词为：&quot;</span> <span class="token operator">+</span> skw<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 根据关键字进行搜索查找 END</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 通过QuickExec 输入字符串来筛选出要高亮的url</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> filter_and_highlight_url<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isMatch</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span><span class="token function">GetResponseBodyAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> filter_and_highlight_url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-color&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;#FF0000&quot;</span><span class="token punctuation">;</span>
        oSession<span class="token punctuation">[</span><span class="token string">&quot;ui-bold&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oSession<span class="token punctuation">.</span>fullUrl<span class="token punctuation">,</span> <span class="token string">&quot;发现匹配的内容：&quot;</span><span class="token punctuation">,</span> filter_and_highlight_url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">/**
   * 链接返回出错时的回调方法
   */</span>
<span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">OnReturningError</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">oSession</span><span class="token operator">:</span> Session</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>settingMatch <span class="token operator">&amp;&amp;</span> settingUnMatch <span class="token operator">&amp;&amp;</span> oSession<span class="token punctuation">)</span><span class="token punctuation">{</span>
        sessionCallback <span class="token operator">&amp;&amp;</span> <span class="token function">sessionCallback</span><span class="token punctuation">(</span>oSession<span class="token punctuation">,</span><span class="token string">'OnReturningError'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">hideTunnelToLink</span><span class="token punctuation">(</span>oSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 出错时的颜色配置</span>
    <span class="token keyword">var</span> onErrorConf <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>onError<span class="token punctuation">;</span>
    <span class="token operator">!</span>onErrorConf<span class="token punctuation">.</span>bgColor <span class="token operator">?</span> onErrorConf<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> <span class="token constant">GLOBAL_SETTING</span><span class="token punctuation">.</span><span class="token constant">UI</span><span class="token punctuation">.</span>bgColor <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token function">setSessionDisplay</span><span class="token punctuation">(</span>oSession<span class="token punctuation">,</span> onErrorConf<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment">/*
   // This function executes just before Fiddler returns an error that it has
   // itself generated (e.g. &quot;DNS Lookup failure&quot;) to the client application.
   // These responses will not run through the OnBeforeResponse function above.
   static function OnReturningError(oSession: Session) {
   }
   */</span>
  <span class="token comment">/*
   // This function executes after Fiddler finishes processing a Session, regardless
   // of whether it succeeded or failed. Note that this typically runs AFTER the last
   // update of the Web Sessions UI listitem, so you must manually refresh the Session's
   // UI if you intend to change it.
   static function OnDone(oSession: Session) {
   }
   */</span>

  <span class="token comment">/*
   static function OnBoot() {
   MessageBox.Show(&quot;Fiddler has finished booting&quot;);
   System.Diagnostics.Process.Start(&quot;iexplore.exe&quot;);

   UI.ActivateRequestInspector(&quot;HEADERS&quot;);
   UI.ActivateResponseInspector(&quot;HEADERS&quot;);
   }
   */</span>

  <span class="token comment">/*
   static function OnBeforeShutdown(): Boolean {
   // Return false to cancel shutdown.
   return ((0 == FiddlerApplication.UI.lvSessions.TotalItemCount()) ||
   (DialogResult.Yes == MessageBox.Show(&quot;Allow Fiddler to exit?&quot;, &quot;Go Bye-bye?&quot;,
   MessageBoxButtons.YesNo, MessageBoxIcon.Question, MessageBoxDefaultButton.Button2)));
   }
   */</span>

  <span class="token comment">/*
   static function OnShutdown() {
   MessageBox.Show(&quot;Fiddler has shutdown&quot;);
   }
   */</span>

  <span class="token comment">/*
   static function OnAttach() {
   MessageBox.Show(&quot;Fiddler is now the system proxy&quot;);
   }
   */</span>

  <span class="token comment">/*
   static function OnDetach() {
   MessageBox.Show(&quot;Fiddler is no longer the system proxy&quot;);
   }
   */</span>

  <span class="token comment">// The Main() function runs everytime your FiddlerScript compiles</span>
<span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">var</span> <span class="token literal-property property">today</span><span class="token operator">:</span> Date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot; CustomRules.js was loaded at: &quot;</span> <span class="token operator">+</span> today<span class="token punctuation">;</span>

    <span class="token comment">// Uncomment to add a &quot;Server&quot; column containing the response &quot;Server&quot; header, if present</span>
    <span class="token comment">// UI.lvSessions.AddBoundColumn(&quot;Server&quot;, 50, &quot;@response.server&quot;);</span>

    <span class="token comment">// Uncomment to add a global hotkey (Win+G) that invokes the ExecAction method below...</span>
    <span class="token comment">// UI.RegisterCustomHotkey(HotkeyModifiers.Windows, Keys.G, &quot;screenshot&quot;);</span>
<span class="token punctuation">}</span>

  <span class="token comment">// These static variables are used for simple breakpointing &amp; other QuickExec rules</span>
<span class="token function">BindPref</span><span class="token punctuation">(</span><span class="token string">&quot;fiddlerscript.ephemeral.bpRequestURI&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">var</span> <span class="token literal-property property">bpRequestURI</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token function">BindPref</span><span class="token punctuation">(</span><span class="token string">&quot;fiddlerscript.ephemeral.bpResponseURI&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">var</span> <span class="token literal-property property">bpResponseURI</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token function">BindPref</span><span class="token punctuation">(</span><span class="token string">&quot;fiddlerscript.ephemeral.bpMethod&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">var</span> <span class="token literal-property property">bpMethod</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token keyword">var</span> <span class="token literal-property property">bpStatus</span><span class="token operator">:</span> int <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">var</span> <span class="token literal-property property">uiBoldURI</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">var</span> <span class="token literal-property property">gs_ReplaceToken</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">var</span> <span class="token literal-property property">gs_ReplaceTokenWith</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">var</span> <span class="token literal-property property">gs_OverridenHost</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">var</span> <span class="token literal-property property">gs_OverrideHostWith</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">var</span> <span class="token literal-property property">filter_and_highlight_url</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//根据匹配的字符来高亮筛选出的url</span>

  <span class="token comment">// The OnExecAction function is called by either the QuickExec box in the Fiddler window,</span>
  <span class="token comment">// or by the ExecAction.exe command line utility.</span>
<span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">OnExecAction</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">sParams</span><span class="token operator">:</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token punctuation">{</span>

    FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;ExecAction: &quot;</span> <span class="token operator">+</span> sParams<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> sAction <span class="token operator">=</span> sParams<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>sAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;bold&quot;</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sParams<span class="token punctuation">.</span>Length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                uiBoldURI <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Bolding cleared&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            uiBoldURI <span class="token operator">=</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Bolding requests for &quot;</span> <span class="token operator">+</span> uiBoldURI<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;bp&quot;</span><span class="token operator">:</span>
            FiddlerObject<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;bpu = breakpoint request for uri\nbpm = breakpoint request method\nbps=breakpoint response status\nbpafter = breakpoint response for URI&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;bps&quot;</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sParams<span class="token punctuation">.</span>Length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                bpStatus <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
                FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Response Status breakpoint cleared&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            bpStatus <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Response status breakpoint for &quot;</span> <span class="token operator">+</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;bpv&quot;</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">&quot;bpm&quot;</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sParams<span class="token punctuation">.</span>Length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                bpMethod <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Request Method breakpoint cleared&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            bpMethod <span class="token operator">=</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Request Method breakpoint for &quot;</span> <span class="token operator">+</span> bpMethod<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;bpu&quot;</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sParams<span class="token punctuation">.</span>Length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                bpRequestURI <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;RequestURI breakpoint cleared&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            bpRequestURI <span class="token operator">=</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;RequestURI breakpoint for &quot;</span> <span class="token operator">+</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;bpa&quot;</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">&quot;bpafter&quot;</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sParams<span class="token punctuation">.</span>Length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                bpResponseURI <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;ResponseURI breakpoint cleared&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            bpResponseURI <span class="token operator">=</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;ResponseURI breakpoint for &quot;</span> <span class="token operator">+</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;overridehost&quot;</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sParams<span class="token punctuation">.</span>Length <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                gs_OverridenHost <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Host Override cleared&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            gs_OverridenHost <span class="token operator">=</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gs_OverrideHostWith <span class="token operator">=</span> sParams<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Connecting to [&quot;</span> <span class="token operator">+</span> gs_OverrideHostWith <span class="token operator">+</span> <span class="token string">&quot;] for requests to [&quot;</span> <span class="token operator">+</span> gs_OverridenHost <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;urlreplace&quot;</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sParams<span class="token punctuation">.</span>Length <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                gs_ReplaceToken <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;URL Replacement cleared&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            gs_ReplaceToken <span class="token operator">=</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            gs_ReplaceTokenWith <span class="token operator">=</span> sParams<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;%20&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Simple helper</span>
            FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Replacing [&quot;</span> <span class="token operator">+</span> gs_ReplaceToken <span class="token operator">+</span> <span class="token string">&quot;] in URIs with [&quot;</span> <span class="token operator">+</span> gs_ReplaceTokenWith <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;allbut&quot;</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">&quot;keeponly&quot;</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sParams<span class="token punctuation">.</span>Length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Please specify Content-Type to retain during wipe.&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actSelectSessionsWithResponseHeaderValue</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actRemoveUnselectedSessions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span>lvSessions<span class="token punctuation">.</span>SelectedItems<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Removed all but Content-Type: &quot;</span> <span class="token operator">+</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;stop&quot;</span><span class="token operator">:</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actDetachProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;start&quot;</span><span class="token operator">:</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actAttachProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;cls&quot;</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">&quot;clear&quot;</span><span class="token operator">:</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actRemoveAllSessions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;g&quot;</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">&quot;go&quot;</span><span class="token operator">:</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actResumeAllSessions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;goto&quot;</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sParams<span class="token punctuation">.</span>Length <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            Utilities<span class="token punctuation">.</span><span class="token function">LaunchHyperlink</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.google.com/search?hl=en&amp;btnI=I%27m+Feeling+Lucky&amp;q=&quot;</span> <span class="token operator">+</span> Utilities<span class="token punctuation">.</span><span class="token function">UrlEncode</span><span class="token punctuation">(</span>sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;help&quot;</span><span class="token operator">:</span>
            Utilities<span class="token punctuation">.</span><span class="token function">LaunchHyperlink</span><span class="token punctuation">(</span><span class="token string">&quot;http://fiddler2.com/r/?quickexec&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;hide&quot;</span><span class="token operator">:</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actMinimizeToTray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;log&quot;</span><span class="token operator">:</span>
            FiddlerApplication<span class="token punctuation">.</span>Log<span class="token punctuation">.</span><span class="token function">LogString</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sParams<span class="token punctuation">.</span>Length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;User couldn't think of anything to say...&quot;</span> <span class="token operator">:</span> sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;nuke&quot;</span><span class="token operator">:</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actClearWinINETCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actClearWinINETCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;screenshot&quot;</span><span class="token operator">:</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actCaptureScreenshot</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;show&quot;</span><span class="token operator">:</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actRestoreWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;tail&quot;</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sParams<span class="token punctuation">.</span>Length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Please specify # of sessions to trim the session list to.&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">TrimSessionList</span><span class="token punctuation">(</span>int<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sParams<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;quit&quot;</span><span class="token operator">:</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;dump&quot;</span><span class="token operator">:</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actSelectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actSaveSessionsToZip</span><span class="token punctuation">(</span><span class="token constant">CONFIG</span><span class="token punctuation">.</span><span class="token function">GetPath</span><span class="token punctuation">(</span><span class="token string">&quot;Captures&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;dump.saz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">UI</span><span class="token punctuation">.</span><span class="token function">actRemoveAllSessions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;Dumped all sessions to &quot;</span> <span class="token operator">+</span> <span class="token constant">CONFIG</span><span class="token punctuation">.</span><span class="token function">GetPath</span><span class="token punctuation">(</span><span class="token string">&quot;Captures&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;dump.saz&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sAction<span class="token punctuation">.</span><span class="token function">StartsWith</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> sAction<span class="token punctuation">.</span><span class="token function">StartsWith</span><span class="token punctuation">(</span><span class="token string">&quot;www.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">.</span>Process<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span>sParams<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sParams<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                filter_and_highlight_url <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;取消URL高亮&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                filter_and_highlight_url <span class="token operator">=</span> sParams<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                FiddlerObject<span class="token punctuation">.</span>StatusText <span class="token operator">=</span> <span class="token string">&quot;将为你高亮包含【&quot;</span> <span class="token operator">+</span> filter_and_highlight_url <span class="token operator">+</span> <span class="token string">&quot;】的url&quot;</span><span class="token punctuation">;</span>
                <span class="token comment">// FiddlerObject.StatusText = &quot;Requested ExecAction: '&quot; + sAction + &quot;' not found. Type HELP to learn more.&quot;;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_5-经过此番操作之后-在你本地计算机就应该可以代理到并能实时观察本地修改的效果啦-手机就要另外的步骤了-下面开始"><a href="#_5-经过此番操作之后-在你本地计算机就应该可以代理到并能实时观察本地修改的效果啦-手机就要另外的步骤了-下面开始" class="header-anchor">#</a> 5.经过此番操作之后，在你本地计算机就应该可以代理到并能实时观察本地修改的效果啦，手机就要另外的步骤了，下面开始：</h4> <h4 id="_6-手机代理-首先确保手机与电脑处在同一局域网-无线网卡-ipconfig-all-查看自己电脑的-ip-地址"><a href="#_6-手机代理-首先确保手机与电脑处在同一局域网-无线网卡-ipconfig-all-查看自己电脑的-ip-地址" class="header-anchor">#</a> 6.手机代理，首先确保手机与电脑处在同一局域网（无线网卡），ipconfig -all 查看自己电脑的 ip 地址</h4> <p><img src="https://img-blog.csdnimg.cn/2021071517414677.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <h4 id="_7-手机连上-wifi-热点后进入-wifi-详情并手动配置代理-记住端口需要保持一致"><a href="#_7-手机连上-wifi-热点后进入-wifi-详情并手动配置代理-记住端口需要保持一致" class="header-anchor">#</a> 7.手机连上 wifi 热点后进入 wifi 详情并手动配置代理，记住端口需要保持一致</h4> <p><img src="https://img-blog.csdnimg.cn/20210715174312235.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <h4 id="_8-配置成功后用-safri-浏览器访问-192-168-11-75-6888-以你自己的-ip-和设置的端口号为准-访问成功后点击-fiddlerroot-certificate-下载手机端证书"><a href="#_8-配置成功后用-safri-浏览器访问-192-168-11-75-6888-以你自己的-ip-和设置的端口号为准-访问成功后点击-fiddlerroot-certificate-下载手机端证书" class="header-anchor">#</a> 8.配置成功后用 safri 浏览器访问 192.168.11.75:6888 （以你自己的 ip 和设置的端口号为准），访问成功后点击 FiddlerRoot certificate 下载手机端证书</h4> <p><img src="https://img-blog.csdnimg.cn/20210715174501791.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDYxODA2OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <h4 id="_9-根据步骤下载完证书后-ios-需要在设置-》-通用-》-关于本机-》证书信任设置-》开启对应证书的信任-极为重要"><a href="#_9-根据步骤下载完证书后-ios-需要在设置-》-通用-》-关于本机-》证书信任设置-》开启对应证书的信任-极为重要" class="header-anchor">#</a> 9.根据步骤下载完证书后，ios 需要在设置 --》 通用 --》 关于本机 --》证书信任设置 --》开启对应证书的信任 ！！！！！！（极为重要）</h4> <h4 id="_10-打开后就可以愉快的电脑本地修改运行项目-然后手机实时查看运行结果"><a href="#_10-打开后就可以愉快的电脑本地修改运行项目-然后手机实时查看运行结果" class="header-anchor">#</a> 10.打开后就可以愉快的电脑本地修改运行项目，然后手机实时查看运行结果</h4> <p>有帮助请点一波关注加赞，手写不易，O(∩_∩)O 哈哈~，祝各位头发浓密</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div> <div class="footer" data-v-34d4abe6><div id="footer-info" data-v-34d4abe6><div class="footer-left" data-v-34d4abe6>
      © 2020-2024
      <span data-v-34d4abe6><a href="https://github.com/cwlojako/" target="_blank">cwlojako_陈尉</a></span></div> <div class="footer-right" data-v-34d4abe6>Theme:<a href="https://github.com/JoeyBling/vuepress-theme-yilia-plus" target="_blank">vuepress-theme-yilia-plus</a> by Litten</div></div> <div class="busuanzi" data-v-34d4abe6><span id="busuanzi_container_site_pv" style="display:none">
    本站总访问量
    <span id="busuanzi_value_site_pv"></span>次
    <span class="post-meta-divider">|</span></span> <span id="busuanzi_container_site_uv" style="display:none">
    本站访客数
    <span id="busuanzi_value_site_uv"></span>人
  </span></div></div></main><div class="global-ui"><!----><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2dcanvas" width="135" height="300" class="live2dcanvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.4c8c796d.js" defer></script><script src="/assets/js/2.0b9b4c7f.js" defer></script><script src="/assets/js/17.d70d5bcf.js" defer></script>
  </body>
</html>
